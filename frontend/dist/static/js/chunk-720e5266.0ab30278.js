(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-720e5266"],{"0508":function(e,t,a){"use strict";a("a1a3")},"0749":function(e,t,a){"use strict";a("4311")},"0eca":function(e,t,a){},"324f":function(e,t,a){"use strict";a("54a7")},"333d":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[a("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},r=[];a("a9e3");Math.easeInOutQuad=function(e,t,a,n){return e/=n/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var o=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function i(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function s(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(e,t,a){var n=s(),r=e-n,l=20,c=0;t="undefined"===typeof t?500:t;var u=function e(){c+=l;var s=Math.easeInOutQuad(c,n,r,t);i(s),c<t?o(e):a&&"function"===typeof a&&a()};u()}var c={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&l(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&l(0,800)}}},u=c,d=(a("0508"),a("2877")),f=Object(d["a"])(u,n,r,!1,null,"46986d7b",null);t["a"]=f.exports},3823:function(e,t,a){"use strict";a("d173")},"39ada":function(e,t,a){"use strict";a("dc18")},4311:function(e,t,a){},"4ace":function(e,t,a){},"4ae6":function(e,t,a){"use strict";a("e317")},5161:function(e,t,a){},"52da":function(e,t,a){"use strict";a("d9a5")},"547c":function(e,t,a){"use strict";a("b288")},"54a7":function(e,t,a){},"5b29":function(e,t,a){"use strict";a("70c6")},"5c15":function(e,t,a){},"6d02":function(e,t,a){"use strict";a("a988")},"70c6":function(e,t,a){},"7476a":function(e,t,a){"use strict";a("896d")},"773c":function(e,t,a){"use strict";a("8dec")},"7eaf":function(e,t,a){"use strict";a("b40d")},"865f":function(e,t,a){},"867e":function(e,t,a){"use strict";a("fb3c")},"896d":function(e,t,a){},"89b0":function(e,t,a){"use strict";a("bfa8")},"8dec":function(e,t,a){},9239:function(e,t,a){"use strict";a("f1ab")},"934a":function(e,t,a){},"95c1":function(e,t,a){"use strict";a("865f")},a1a3:function(e,t,a){},a988:function(e,t,a){},ab89:function(e,t,a){},abe3:function(e,t,a){},ac2b:function(e,t,a){"use strict";a("d9cb")},b288:function(e,t,a){},b40d:function(e,t,a){},b5fb:function(e,t,a){},b8e3:function(e,t,a){},bfa8:function(e,t,a){},c565:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"notification-container"},[a("el-tabs",{attrs:{"tab-position":"left"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"身份证",name:"identityCard"}},[a("identity-card",{ref:"identityCard"})],1),a("el-tab-pane",{attrs:{label:"户口本",name:"householdRegister"}},[a("household-register",{ref:"householdRegister"})],1),a("el-tab-pane",{attrs:{label:"驾驶证",name:"drivingLicense"}},[a("driving-license",{ref:"drivingLicense"})],1),a("el-tab-pane",{attrs:{label:"行驶证",name:"vehicleLicense"}},[a("vehicle-license",{ref:"vehicleLicense"})],1),a("el-tab-pane",{attrs:{label:"结婚证",name:"marriageRegistration"}},[a("marriage-registration",{ref:"marriageRegistration"})],1),a("el-tab-pane",{attrs:{label:"产权证",name:"ownershipCertificate"}},[a("ownership-certificate",{ref:"ownershipCertificate"})],1),a("el-tab-pane",{attrs:{label:"出生证",name:"birthCertificate"}},[a("birth-certificate",{ref:"birthCertificate"})],1),a("el-tab-pane",{attrs:{label:"营业执照",name:"businessLicense"}},[a("business-license",{ref:"businessLicense"})],1)],1)],1)},r=[],o=a("5530"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"identity-card-container"},[a("table-layout",{staticClass:"table-layout",scopedSlots:e._u([{key:"headerLeft",fn:function(){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.handleAdd}},[e._v("新增")]),a("warning-confirm-button",{attrs:{"button-type":"danger",content:"确认批量删除 "+e.tableMultipleSelection.length+" 条数据？",closed:e.handleRefresh},on:{confirm:function(t){e.handleBulkDelete(t)}}},[e._v("批量删除")])]},proxy:!0},{key:"headerRight",fn:function(){return[a("el-input",{staticClass:"search-input",attrs:{size:"mini",placeholder:"请输入姓名"},model:{value:e.tableSearchParams.name,callback:function(t){e.$set(e.tableSearchParams,"name",t)},expression:"tableSearchParams.name"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search",type:"primary"},on:{click:e.loadTableData},slot:"append"},[e._v("搜索")])],1),a("span",{staticClass:"line"},[e._v("|")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-refresh"},on:{click:e.handleRefresh}}),a("el-button",{attrs:{size:"mini",icon:"el-icon-download"}})]},proxy:!0},{key:"pagination",fn:function(){return[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.tablePagination.total>0,expression:"tablePagination.total>0"}],attrs:{total:e.tablePagination.total,page:e.tablePagination.currentPage,limit:e.tablePagination.pageSize},on:{"update:page":function(t){return e.$set(e.tablePagination,"currentPage",t)},"update:limit":function(t){return e.$set(e.tablePagination,"pageSize",t)},pagination:e.loadTableData}})]},proxy:!0}])},[[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"table",staticClass:"has-checkbox",staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"small","header-cell-style":{backgroundColor:"#ebeef4"},border:"",fit:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",width:"30",fixed:"left"}}),a("el-table-column",{attrs:{type:"selection",align:"center",width:"30",fixed:"left"}}),a("el-table-column",{attrs:{prop:"content",label:"姓名",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",{staticClass:"link-type",on:{click:function(t){return e.handleEdit(n)}}},[e._v(e._s(n.content.name))])]}}])}),a("el-table-column",{attrs:{prop:"content.identityNumber",label:"身份证号码",align:"center",width:"160"}}),a("el-table-column",{attrs:{prop:"content",label:"有效期",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.content.validPeriod&&a.content.validPeriod[0]||"")+" ~ "+e._s(a.content.validPeriod&&a.content.validPeriod[1]||"")+" ")]}}])}),a("el-table-column",{attrs:{prop:"content.issuingAuthority",label:"签发机关",align:"center",width:"160"}}),a("el-table-column",{attrs:{prop:"content.address",label:"户籍地址",align:"center"}}),a("el-table-column",{attrs:{label:"操作",width:"150",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleView(t.row)}}},[e._v("详情")]),a("warning-confirm-button",{attrs:{closed:e.handleRefresh},on:{confirm:function(a){e.handleDelete(t.row,a)}}},[e._v("删除")])]}}])})],1)]],2),a("identity-card-form-dialog",{ref:"formDialog",attrs:{"form-id":e.formId},on:{"save-success":e.handleRefresh},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}}),a("identity-card-form-dialog-view",{ref:"formDialogView",attrs:{"form-id":e.formId},model:{value:e.dialogVisibleView,callback:function(t){e.dialogVisibleView=t},expression:"dialogVisibleView"}})],1)},s=[],l=a("1da1"),c=(a("96cf"),a("b0c0"),a("d81d"),a("2ef0")),u=a.n(c),d=a("fe2b"),f=a("fbbc"),m=a("333d"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,width:"50%","close-on-click-modal":!0,"append-to-body":!0,center:!0,visible:e.visible},on:{"update:visible":function(t){e.visible=t},open:e.open,close:e.close,closed:e.closed}},[a("el-form",{ref:"form",attrs:{"label-position":"right",model:e.form,rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"姓名","label-width":e.labelWidth,prop:"content.name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.content.name,callback:function(t){e.$set(e.form.content,"name",t)},expression:"form.content.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"性别","label-width":e.labelWidth,prop:"content.sex"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.form.content.sex,callback:function(t){e.$set(e.form.content,"sex",t)},expression:"form.content.sex"}},[e._v("男")]),a("el-radio",{attrs:{label:"2"},model:{value:e.form.content.sex,callback:function(t){e.$set(e.form.content,"sex",t)},expression:"form.content.sex"}},[e._v("女")])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"民族","label-width":e.labelWidth,prop:"content.nationality"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择"},model:{value:e.form.content.nationality,callback:function(t){e.$set(e.form.content,"nationality",t)},expression:"form.content.nationality"}},e._l(e.nationalityList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"出生日期","label-width":e.labelWidth,prop:"content.dob"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",size:"mini",align:"right","unlink-panels":""},model:{value:e.form.content.dob,callback:function(t){e.$set(e.form.content,"dob",t)},expression:"form.content.dob"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"身份号码","label-width":e.labelWidth,prop:"content.identityNumber"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.content.identityNumber,callback:function(t){e.$set(e.form.content,"identityNumber",t)},expression:"form.content.identityNumber"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"签发机关","label-width":e.labelWidth,prop:"content.issuingAuthority"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.content.issuingAuthority,callback:function(t){e.$set(e.form.content,"issuingAuthority",t)},expression:"form.content.issuingAuthority"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"有效期","label-width":e.labelWidth,prop:"content.validPeriod"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",size:"mini",type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.form.content.validPeriod,callback:function(t){e.$set(e.form.content,"validPeriod",t)},expression:"form.content.validPeriod"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"户籍地址","label-width":e.labelWidth,prop:"content.address"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.content.address,callback:function(t){e.$set(e.form.content,"address",t)},expression:"form.content.address"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"身份证人像面","label-width":"auto",prop:"content.identityCardFront"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#",accept:"image/png, image/jpeg","show-file-list":!1,"on-success":function(t,a,n){return e.handleUploadSuccess(t,a,n,"identityCardFront")},"on-error":e.handleUploadError,"on-progress":e.handleUploadProgress,"http-request":function(t){return e.upload(t,"identityCardFront")}}},[e.form.content.identityCardFront?a("img",{staticClass:"avatar",attrs:{src:e.VUE_APP_BASE_API+e.form.content.identityCardFront}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("div",{directives:[{name:"show",rawName:"v-show",value:0!==e.uploadProgressPercentIdentityCardFront,expression:"uploadProgressPercentIdentityCardFront !== 0"}],staticClass:"progress-wrapper"},[a("el-progress",{attrs:{type:"circle",percentage:e.uploadProgressPercentIdentityCardFront}})],1)])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"身份证国徽面","label-width":"auto",prop:"content.identityCardBack"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#",accept:"image/png, image/jpeg","show-file-list":!1,"on-success":function(t,a,n){return e.handleUploadSuccess(t,a,n,"identityCardBack")},"on-error":e.handleUploadError,"on-progress":e.handleUploadProgress,"http-request":function(t){return e.upload(t,"identityCardBack")}}},[e.form.content.identityCardBack?a("img",{staticClass:"avatar",attrs:{src:e.VUE_APP_BASE_API+e.form.content.identityCardBack}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("div",{directives:[{name:"show",rawName:"v-show",value:0!==e.uploadProgressPercentIdentityCardBack,expression:"uploadProgressPercentIdentityCardBack !== 0"}],staticClass:"progress-wrapper"},[a("el-progress",{attrs:{type:"circle",percentage:e.uploadProgressPercentIdentityCardBack}})],1)])],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-button",{attrs:{size:"mini"},on:{click:e.close}},[e._v("取 消")]),a("el-button",{attrs:{size:"mini",type:"primary",loading:e.saving},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},g=[],h=a("dde5"),b=a("61f7"),v=["汉族","壮族","满族","回族","苗族","维吾尔族","土家族","彝族","蒙古族","藏族","布依族","侗族","瑶族","朝鲜族","白族","哈尼族","哈萨克族","黎族","傣族","畲族","傈僳族","仡佬族","东乡族","高山族","拉祜族","水族","佤族","纳西族","羌族","土族","仫佬族","锡伯族","柯尔克孜族","达斡尔族","景颇族","毛南族","撒拉族","布朗族","塔吉克族","阿昌族","普米族","鄂温克族","怒族","京族","基诺族","德昂族","保安族","俄罗斯族","裕固族","乌孜别克族","门巴族","鄂伦春族","独龙族","塔塔尔族","赫哲族","珞巴族"],w={components:{},model:{prop:"dialogVisible",event:"close"},props:{dialogVisible:{type:Boolean,required:!0},formId:{type:String,default:"-1"}},data:function(){var e=function(e,t,a){Object(b["b"])(t)?a():a(new Error("请输入正确的身份证号码"))};return{labelWidth:"100px",defaultForm:null,form:{id:"",type:"identityCard",content:{name:"",sex:"1",nationality:"",dob:"",identityNumber:"",issuingAuthority:"",validPeriod:"",address:"",identityCardFront:"",identityCardBack:""}},rules:{"content.name":[{required:!0,message:"必填",trigger:"blur"}],"content.sex":[{required:!0,message:"必填",trigger:"blur"}],"content.nationality":[{required:!0,message:"必选",trigger:"change"}],"content.dob":[{required:!0,message:"必填",trigger:"blur"}],"content.identityNumber":[{required:!0,trigger:"blur",validator:e}],"content.issuingAuthority":[{required:!0,message:"必填",trigger:"blur"}],"content.validPeriod":[{required:!0,message:"必填",trigger:"blur"}],"content.address":[{required:!0,message:"必填",trigger:"blur"}],"content.identityCardFront":[{required:!0,message:"必填",trigger:"change"}],"content.identityCardBack":[{required:!0,message:"必填",trigger:"change"}]},loading:!1,saving:!1,uploadProgressPercentIdentityCardFront:0,uploadProgressPercentIdentityCardBack:0,loadingSelect:!1,userList:[],nationalityList:v}},computed:{visible:{get:function(){return this.dialogVisible},set:function(){this.$emit("close",!1)}},title:function(){return"-1"===this.form.id?"添加身份证":"编辑身份证"}},created:function(){this.defaultForm=u.a.cloneDeep(this.form)},destroyed:function(){this.defaultForm=null},methods:{open:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:if("-1"!==e.form.id){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.setData();case 6:case"end":return t.stop()}}),t)})))()},init:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{e.form.id=e.formId}catch(n){console.error("bag.getUserList-error:",n),a=n&&n.data.message||"发生了一些未知的错误，请重试！",e.$message.error(a)}case 1:case"end":return t.stop()}}),t)})))()},setData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h["f"].getBag({id:e.form.id});case 3:a=t.sent,n=a.data.data,r=n.type,o=n.content,e.form.type=r,e.form.content=o,t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](0),console.error("bag.getBag-error:",t.t0),i=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(i);case 15:case"end":return t.stop()}}),t,null,[[0,10]])})))()},close:function(){this.visible=!1,this.saving=!1,this.loading=!1,this.clearValidate()},closed:function(){this.form=u.a.cloneDeep(this.defaultForm)},done:function(){this.saving=!1},validate:function(e){this.$refs.form&&this.$refs.form.validate(e)},resetFields:function(){this.$refs.form&&this.$refs.form.resetFields()},clearValidate:function(e){this.$refs.form&&this.$refs.form.clearValidate(e)},submit:function(){var e=this;this.$refs.form.validate(function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(a){var n,r,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=26;break}if(e.saving=!0,n=u.a.cloneDeep(e.form),r=null,t.prev=4,"-1"!==n.id){t.next=11;break}return t.next=8,h["f"].createBag(n);case 8:r=t.sent,t.next=14;break;case 11:return t.next=13,h["f"].updateBag(n);case 13:r=t.sent;case 14:o=r.data.data,console.log(o),e.$emit("save-success"),e.close(),t.next=26;break;case 20:t.prev=20,t.t0=t["catch"](4),console.error("bag.submitBag-error:",t.t0),e.done(),i=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(i);case 26:case"end":return t.stop()}}),t,null,[[4,20]])})));return function(e){return t.apply(this,arguments)}}())},beforeUpload:function(e){var t="image/jpeg"===e.type,a="image/png"===e.type,n=e.size/1024/1024<100;return t||a?!!n||(this.$message.error("上传头像图片大小不能超过 10MB!"),!1):(this.$message.error("上传头像图片只能是 JPG、PNG 格式!"),!1)},upload:function(e,t){var a=this,n=this.beforeUpload(e.file);n&&(console.log(e),h["h"].upload(e.file.name,e.file,{onUploadProgress:function(n){var r=Math.floor(100*n.loaded/n.total);console.log(r),e.onProgress({percent:r}),a["uploadProgressPercent"+t]=r}}).then((function(n){e.onSuccess(n),setTimeout((function(){a["uploadProgressPercent"+t]=0}),1e3)})).catch((function(t){e.onError(t)})))},handleUploadSuccess:function(e,t,a,n){this.form.content[n]=e.data.data.url,this.clearValidate("content."+n)},handleUploadError:function(e){console.log(e),this.$message({message:"上传失败",type:"error"})},handleUploadProgress:function(e,t,a){console.log(e,t)}}},P=w,y=(a("f86a"),a("2877")),x=Object(y["a"])(P,p,g,!1,null,"e62971ee",null),k=x.exports,_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,width:"60%","close-on-click-modal":!0,"append-to-body":!0,center:!0,visible:e.visible},on:{"update:visible":function(t){e.visible=t},open:e.open,close:e.close,closed:e.closed}},[a("el-descriptions",{staticClass:"margin-top",attrs:{column:3,border:""}},[a("el-descriptions-item",{attrs:{span:3}},[a("template",{slot:"label"},[e._v(" 身份证号码 ")]),e._v(" "+e._s(e.form.content.identityNumber)+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[e._v(" 姓名 ")]),e._v(" "+e._s(e.form.content.name)+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[e._v(" 性别 ")]),e._v(" "+e._s("1"===e.form.content.sex?"男":"女")+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[e._v(" 民族 ")]),e._v(" "+e._s(e.form.content.nationality)+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[e._v(" 出生日期 ")]),e._v(" "+e._s(e.form.content.dob)+" ")],2),a("el-descriptions-item",{attrs:{span:2}},[a("template",{slot:"label"},[e._v(" 有效期 ")]),e._v(" "+e._s(e.form.content.validity&&e.form.content.validity[0]||"")+" ~ "+e._s(e.form.content.validity&&e.form.content.validity[1]||"")+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[e._v(" 签发机关 ")]),e._v(" "+e._s(e.form.content.issuingAuthority)+" ")],2),a("el-descriptions-item",{attrs:{span:2}},[a("template",{slot:"label"},[e._v(" 户籍地址 ")]),e._v(" "+e._s(e.form.content.address)+" ")],2),a("el-descriptions-item",{attrs:{span:3}},[a("template",{slot:"label"},[e._v(" 身份证人像面 ")]),a("el-image",{attrs:{src:e.VUE_APP_BASE_API+e.form.content.identityCardFront}})],2),a("el-descriptions-item",{attrs:{span:3}},[a("template",{slot:"label"},[e._v(" 身份证国徽面 ")]),a("el-image",{attrs:{src:e.VUE_APP_BASE_API+e.form.content.identityCardBack}})],2)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-button",{attrs:{size:"mini"},on:{click:e.close}},[e._v("关 闭")])],1)],1)],1)},D=[],S={components:{},model:{prop:"dialogVisible",event:"close"},props:{dialogVisible:{type:Boolean,required:!0},formId:{type:String,default:"-1"}},data:function(){return{form:{content:{}}}},computed:{visible:{get:function(){return this.dialogVisible},set:function(){this.$emit("close",!1)}},title:function(){return"查看身份证"}},created:function(){this.defaultForm=u.a.cloneDeep(this.form)},destroyed:function(){this.defaultForm=null},methods:{open:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:return t.next=4,e.setData();case 4:case"end":return t.stop()}}),t)})))()},init:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{e.form.id=e.formId}catch(n){console.error("bag.getUserList-error:",n),a=n&&n.data.message||"发生了一些未知的错误，请重试！",e.$message.error(a)}case 1:case"end":return t.stop()}}),t)})))()},setData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h["f"].getBag({id:e.form.id});case 3:a=t.sent,n=a.data.data,e.form=n,t.next=13;break;case 8:t.prev=8,t.t0=t["catch"](0),console.error("bag.getBag-error:",t.t0),r=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(r);case 13:case"end":return t.stop()}}),t,null,[[0,8]])})))()},close:function(){this.$emit("save-success"),this.visible=!1},closed:function(){this.form=u.a.cloneDeep(this.defaultForm)}}},$=S,V=(a("ac2b"),Object(y["a"])($,_,D,!1,null,"626acb1f",null)),R=V.exports,C={name:"Bag",components:{TableLayout:f["a"],Pagination:m["a"],WarningConfirmButton:d["a"],identityCardFormDialog:k,identityCardFormDialogView:R},data:function(){return{tableData:[],tableLoading:!1,tablePagination:{total:0,pageSize:10,currentPage:1},tableSearchParams:{type:"identityCard",name:""},tablePaginationDefault:null,tableSearchParamsDefault:null,tableMultipleSelection:[],dialogVisible:!1,dialogVisibleView:!1,formId:"-1"}},watch:{tableData:{handler:function(e,t){this.$refs.table.doLayout()},immediate:!0}},created:function(){this.loadTableData(),this.tablePaginationDefault=u.a.cloneDeep(this.tablePagination),this.tableSearchParamsDefault=u.a.cloneDeep(this.tableSearchParams)},destroyed:function(){this.tablePaginationDefault=null,this.tableSearchParamsDefault=null},methods:{loadTableData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r,o,i,s,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.tableLoading=!0,a=e.tablePagination.currentPage,n=e.tablePagination.pageSize,r=e.tableSearchParams.type,o=e.tableSearchParams.name,t.prev=5,t.next=8,h["f"].getBagListByPage({page:a,limit:n,type:r,name:o});case 8:i=t.sent,s=i.data.data,e.tableData=s.list,e.tablePagination.total=s.pagination.total,e.tableLoading=!1,t.next=21;break;case 15:t.prev=15,t.t0=t["catch"](5),console.error("bag.getBagListByPage-error:",t.t0),e.tableLoading=!1,l=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(l);case 21:case"end":return t.stop()}}),t,null,[[5,15]])})))()},handleSelectionChange:function(e){this.tableMultipleSelection=e},handleRefresh:function(){this.tablePagination=u.a.cloneDeep(this.tablePaginationDefault),this.tableSearchParams=u.a.cloneDeep(this.tableSearchParamsDefault),this.loadTableData()},handleAdd:function(){this.formId="-1",this.dialogVisible=!0},handleEdit:function(e){this.formId=e.id,this.dialogVisible=!0},handleDelete:function(e,t){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){var r,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.done,o=t.close,n.prev=1,n.next=4,h["f"].deleteBag({ids:[e.id]});case 4:o(),n.next=13;break;case 7:n.prev=7,n.t0=n["catch"](1),console.error("bag.deleteBag-error:",n.t0),r(),i=n.t0&&n.t0.data.message||"发生了一些未知的错误，请重试！",a.$message.error(i);case 13:case"end":return n.stop()}}),n,null,[[1,7]])})))()},handleBulkDelete:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r,o,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.done,r=e.close,a.prev=1,o=u.a.map(t.tableMultipleSelection,"id"),a.next=5,h["f"].deleteBag({ids:o});case 5:r(),a.next=14;break;case 8:a.prev=8,a.t0=a["catch"](1),console.error("bag.deleteBag-error:",a.t0),n(),i=a.t0&&a.t0.data.message||"发生了一些未知的错误，请重试！",t.$message.error(i);case 14:case"end":return a.stop()}}),a,null,[[1,8]])})))()},handleView:function(e){this.formId=e.id,this.dialogVisibleView=!0}}},B=C,L=(a("7eaf"),Object(y["a"])(B,i,s,!1,null,"61f37d88",null)),j=L.exports,z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"driving-license-container"},[a("table-layout",{staticClass:"table-layout",scopedSlots:e._u([{key:"headerLeft",fn:function(){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.handleAdd}},[e._v("新增")]),a("warning-confirm-button",{attrs:{"button-type":"danger",content:"确认批量删除 "+e.tableMultipleSelection.length+" 条数据？",closed:e.handleRefresh},on:{confirm:function(t){e.handleBulkDelete(t)}}},[e._v("批量删除")])]},proxy:!0},{key:"headerRight",fn:function(){return[a("el-input",{staticClass:"search-input",attrs:{size:"mini",placeholder:"请输入姓名"},model:{value:e.tableSearchParams.name,callback:function(t){e.$set(e.tableSearchParams,"name",t)},expression:"tableSearchParams.name"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search",type:"primary"},on:{click:e.loadTableData},slot:"append"},[e._v("搜索")])],1),a("span",{staticClass:"line"},[e._v("|")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-refresh"},on:{click:e.handleRefresh}}),a("el-button",{attrs:{size:"mini",icon:"el-icon-download"}})]},proxy:!0},{key:"pagination",fn:function(){return[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.tablePagination.total>0,expression:"tablePagination.total>0"}],attrs:{total:e.tablePagination.total,page:e.tablePagination.currentPage,limit:e.tablePagination.pageSize},on:{"update:page":function(t){return e.$set(e.tablePagination,"currentPage",t)},"update:limit":function(t){return e.$set(e.tablePagination,"pageSize",t)},pagination:e.loadTableData}})]},proxy:!0}])},[[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"table",staticClass:"has-checkbox",staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"small","header-cell-style":{backgroundColor:"#ebeef4"},border:"",fit:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",width:"30",fixed:"left"}}),a("el-table-column",{attrs:{type:"selection",align:"center",width:"30",fixed:"left"}}),a("el-table-column",{attrs:{prop:"content",label:"姓名",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",{staticClass:"link-type",on:{click:function(t){return e.handleEdit(n)}}},[e._v(e._s(n.content.name))])]}}])}),a("el-table-column",{attrs:{prop:"content.class",label:"准驾车型",align:"center",width:"160"}}),a("el-table-column",{attrs:{prop:"content",label:"有效期",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.content.validPeriod&&a.content.validPeriod[0]||"")+" ~ "+e._s(a.content.validPeriod&&a.content.validPeriod[1]||"")+" ")]}}])}),a("el-table-column",{attrs:{prop:"content.address",label:"住址",align:"center"}}),a("el-table-column",{attrs:{label:"操作",width:"150",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleView(t.row)}}},[e._v("详情")]),a("warning-confirm-button",{attrs:{closed:e.handleRefresh},on:{confirm:function(a){e.handleDelete(t.row,a)}}},[e._v("删除")])]}}])})],1)]],2),a("driving-license-form-dialog",{ref:"formDialog",attrs:{"form-id":e.formId},on:{"save-success":e.handleRefresh},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}}),a("driving-license-form-dialog-view",{ref:"formDialogView",attrs:{"form-id":e.formId},model:{value:e.dialogVisibleView,callback:function(t){e.dialogVisibleView=t},expression:"dialogVisibleView"}})],1)},O=[],E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,width:"50%","close-on-click-modal":!0,"append-to-body":!0,center:!0,visible:e.visible},on:{"update:visible":function(t){e.visible=t},open:e.open,close:e.close,closed:e.closed}},[a("el-form",{ref:"form",attrs:{"label-position":"right",model:e.form,rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"姓名","label-width":e.labelWidth,prop:"content.name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.content.name,callback:function(t){e.$set(e.form.content,"name",t)},expression:"form.content.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"性别","label-width":e.labelWidth,prop:"content.sex"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.form.content.sex,callback:function(t){e.$set(e.form.content,"sex",t)},expression:"form.content.sex"}},[e._v("男")]),a("el-radio",{attrs:{label:"2"},model:{value:e.form.content.sex,callback:function(t){e.$set(e.form.content,"sex",t)},expression:"form.content.sex"}},[e._v("女")])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"国籍","label-width":e.labelWidth,prop:"content.nationality"}},[a("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.form.content.nationality,callback:function(t){e.$set(e.form.content,"nationality",t)},expression:"form.content.nationality"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"出生日期","label-width":e.labelWidth,prop:"content.dateOfBirth"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",size:"mini",align:"right","unlink-panels":""},model:{value:e.form.content.dateOfBirth,callback:function(t){e.$set(e.form.content,"dateOfBirth",t)},expression:"form.content.dateOfBirth"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"准驾车型","label-width":e.labelWidth,prop:"content.class"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.classUpperCase,callback:function(t){e.classUpperCase="string"===typeof t?t.trim():t},expression:"classUpperCase"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"签发机关","label-width":e.labelWidth,prop:"content.issuingAuthority"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.content.issuingAuthority,callback:function(t){e.$set(e.form.content,"issuingAuthority",t)},expression:"form.content.issuingAuthority"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"证号","label-width":e.labelWidth,prop:"content.identityNumber"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.content.identityNumber,callback:function(t){e.$set(e.form.content,"identityNumber",t)},expression:"form.content.identityNumber"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"有效期","label-width":e.labelWidth,prop:"content.validPeriod"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",size:"mini",type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.form.content.validPeriod,callback:function(t){e.$set(e.form.content,"validPeriod",t)},expression:"form.content.validPeriod"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"地址","label-width":e.labelWidth,prop:"content.address"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.content.address,callback:function(t){e.$set(e.form.content,"address",t)},expression:"form.content.address"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"驾驶证页照片","label-width":"auto",prop:"content.drivingLicensePhoto1"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#",accept:"image/png, image/jpeg","show-file-list":!1,"on-success":function(t,a,n){return e.handleUploadSuccess(t,a,n,"drivingLicensePhoto1")},"on-error":e.handleUploadError,"on-progress":e.handleUploadProgress,"http-request":function(t){return e.upload(t,"drivingLicensePhoto1")}}},[e.form.content.drivingLicensePhoto1?a("img",{staticClass:"avatar",attrs:{src:e.VUE_APP_BASE_API+e.form.content.drivingLicensePhoto1}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("div",{directives:[{name:"show",rawName:"v-show",value:0!==e.uploadProgressPercentDrivingLicensePhoto1,expression:"uploadProgressPercentDrivingLicensePhoto1 !== 0"}],staticClass:"progress-wrapper"},[a("el-progress",{attrs:{type:"circle",percentage:e.uploadProgressPercentDrivingLicensePhoto1}})],1)])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"驾驶证副页照片","label-width":"auto",prop:"content.drivingLicensePhoto2"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#",accept:"image/png, image/jpeg","show-file-list":!1,"on-success":function(t,a,n){return e.handleUploadSuccess(t,a,n,"drivingLicensePhoto2")},"on-error":e.handleUploadError,"on-progress":e.handleUploadProgress,"http-request":function(t){return e.upload(t,"drivingLicensePhoto2")}}},[e.form.content.drivingLicensePhoto2?a("img",{staticClass:"avatar",attrs:{src:e.VUE_APP_BASE_API+e.form.content.drivingLicensePhoto2}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("div",{directives:[{name:"show",rawName:"v-show",value:0!==e.uploadProgressPercentDrivingLicensePhoto2,expression:"uploadProgressPercentDrivingLicensePhoto2 !== 0"}],staticClass:"progress-wrapper"},[a("el-progress",{attrs:{type:"circle",percentage:e.uploadProgressPercentDrivingLicensePhoto2}})],1)])],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-button",{attrs:{size:"mini"},on:{click:e.close}},[e._v("取 消")]),a("el-button",{attrs:{size:"mini",type:"primary",loading:e.saving},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},U=[],A=(a("ac1f"),a("5319"),{components:{},model:{prop:"dialogVisible",event:"close"},props:{dialogVisible:{type:Boolean,required:!0},formId:{type:String,default:"-1"}},data:function(){return{labelWidth:"100px",defaultForm:null,form:{id:"",type:"drivingLicense",content:{name:"",sex:"1",nationality:"中国",dateOfBirth:"",class:"",identityNumber:"",issuingAuthority:"",validPeriod:"",address:"",drivingLicensePhoto1:"",drivingLicensePhoto2:""}},rules:{"content.name":[{required:!0,message:"必填",trigger:"blur"}],"content.sex":[{required:!0,message:"必填",trigger:"blur"}],"content.nationality":[{required:!0,message:"必选",trigger:"change"}],"content.dateOfBirth":[{required:!0,message:"必填",trigger:"blur"}],"content.class":[{required:!0,message:"必填",trigger:"blur"}],"content.identityNumber":[{required:!0,message:"必填",trigger:"blur"}],"content.issuingAuthority":[{required:!0,message:"必填",trigger:"blur"}],"content.validPeriod":[{required:!0,message:"必填",trigger:"blur"}],"content.address":[{required:!0,message:"必填",trigger:"blur"}],"content.drivingLicensePhoto1":[{required:!0,message:"必填",trigger:"change"}],"content.drivingLicensePhoto2":[{required:!0,message:"必填",trigger:"change"}]},loading:!1,saving:!1,uploadProgressPercentDrivingLicensePhoto1:0,uploadProgressPercentDrivingLicensePhoto2:0,loadingSelect:!1,userList:[]}},computed:{visible:{get:function(){return this.dialogVisible},set:function(){this.$emit("close",!1)}},title:function(){return"-1"===this.form.id?"添加驾驶证":"编辑驾驶证"},classUpperCase:{get:function(){return this.form.content.class},set:function(e){this.form.content.class=e.replace(/[\W]/g,"").toUpperCase()}}},created:function(){this.defaultForm=u.a.cloneDeep(this.form)},destroyed:function(){this.defaultForm=null},methods:{open:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:if("-1"!==e.form.id){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.setData();case 6:case"end":return t.stop()}}),t)})))()},init:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{e.form.id=e.formId}catch(n){console.error("bag.getUserList-error:",n),a=n&&n.data.message||"发生了一些未知的错误，请重试！",e.$message.error(a)}case 1:case"end":return t.stop()}}),t)})))()},setData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h["f"].getBag({id:e.form.id});case 3:a=t.sent,n=a.data.data,r=n.type,o=n.content,e.form.type=r,e.form.content=o,t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](0),console.error("bag.getBag-error:",t.t0),i=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(i);case 15:case"end":return t.stop()}}),t,null,[[0,10]])})))()},close:function(){this.visible=!1,this.saving=!1,this.loading=!1,this.clearValidate()},closed:function(){this.form=u.a.cloneDeep(this.defaultForm)},done:function(){this.saving=!1},validate:function(e){this.$refs.form&&this.$refs.form.validate(e)},resetFields:function(){this.$refs.form&&this.$refs.form.resetFields()},clearValidate:function(e){this.$refs.form&&this.$refs.form.clearValidate(e)},submit:function(){var e=this;this.$refs.form.validate(function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(a){var n,r,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=26;break}if(e.saving=!0,n=u.a.cloneDeep(e.form),r=null,t.prev=4,"-1"!==n.id){t.next=11;break}return t.next=8,h["f"].createBag(n);case 8:r=t.sent,t.next=14;break;case 11:return t.next=13,h["f"].updateBag(n);case 13:r=t.sent;case 14:o=r.data.data,console.log(o),e.$emit("save-success"),e.close(),t.next=26;break;case 20:t.prev=20,t.t0=t["catch"](4),console.error("bag.submitBag-error:",t.t0),e.done(),i=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(i);case 26:case"end":return t.stop()}}),t,null,[[4,20]])})));return function(e){return t.apply(this,arguments)}}())},beforeUpload:function(e){var t="image/jpeg"===e.type,a="image/png"===e.type,n=e.size/1024/1024<100;return t||a?!!n||(this.$message.error("上传头像图片大小不能超过 10MB!"),!1):(this.$message.error("上传头像图片只能是 JPG、PNG 格式!"),!1)},upload:function(e,t){var a=this,n=this.beforeUpload(e.file);n&&(console.log(e),h["h"].upload(e.file.name,e.file,{onUploadProgress:function(n){var r=Math.floor(100*n.loaded/n.total);console.log(r),e.onProgress({percent:r}),a["uploadProgressPercent"+t]=r}}).then((function(n){e.onSuccess(n),setTimeout((function(){a["uploadProgressPercent"+t]=0}),1e3)})).catch((function(t){e.onError(t)})))},handleUploadSuccess:function(e,t,a,n){this.form.content[n]=e.data.data.url,this.clearValidate("content."+n)},handleUploadError:function(e){console.log(e),this.$message({message:"上传失败",type:"error"})},handleUploadProgress:function(e,t,a){console.log(e,t)}}}),I=A,T=(a("5b29"),Object(y["a"])(I,E,U,!1,null,"08751a69",null)),F=T.exports,q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,width:"60%","close-on-click-modal":!0,"append-to-body":!0,center:!0,visible:e.visible},on:{"update:visible":function(t){e.visible=t},open:e.open,close:e.close,closed:e.closed}},[a("el-descriptions",{staticClass:"margin-top",attrs:{column:3,border:""}},[a("el-descriptions-item",{attrs:{span:3}},[a("template",{slot:"label"},[e._v(" 身份证号码 ")]),e._v(" "+e._s(e.form.content.identityNumber)+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[e._v(" 姓名 ")]),e._v(" "+e._s(e.form.content.name)+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[e._v(" 性别 ")]),e._v(" "+e._s("1"===e.form.content.sex?"男":"女")+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[e._v(" 民族 ")]),e._v(" "+e._s(e.form.content.nationality)+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[e._v(" 出生日期 ")]),e._v(" "+e._s(e.form.content.dob)+" ")],2),a("el-descriptions-item",{attrs:{span:2}},[a("template",{slot:"label"},[e._v(" 有效期 ")]),e._v(" "+e._s(e.form.content.validity&&e.form.content.validity[0]||"")+" ~ "+e._s(e.form.content.validity&&e.form.content.validity[1]||"")+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[e._v(" 签发机关 ")]),e._v(" "+e._s(e.form.content.issuingAuthority)+" ")],2),a("el-descriptions-item",{attrs:{span:2}},[a("template",{slot:"label"},[e._v(" 户籍地址 ")]),e._v(" "+e._s(e.form.content.address)+" ")],2),a("el-descriptions-item",{attrs:{span:3}},[a("template",{slot:"label"},[e._v(" 驾驶证页照片 ")]),a("el-image",{attrs:{src:e.VUE_APP_BASE_API+e.form.content.drivingLicensePhoto1}})],2),a("el-descriptions-item",{attrs:{span:3}},[a("template",{slot:"label"},[e._v(" 驾驶证副页照片 ")]),a("el-image",{attrs:{src:e.VUE_APP_BASE_API+e.form.content.drivingLicensePhoto2}})],2)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-button",{attrs:{size:"mini"},on:{click:e.close}},[e._v("关 闭")])],1)],1)],1)},N=[],M={components:{},model:{prop:"dialogVisible",event:"close"},props:{dialogVisible:{type:Boolean,required:!0},formId:{type:String,default:"-1"}},data:function(){return{form:{content:{}}}},computed:{visible:{get:function(){return this.dialogVisible},set:function(){this.$emit("close",!1)}},title:function(){return"查看驾驶证"}},created:function(){this.defaultForm=u.a.cloneDeep(this.form)},destroyed:function(){this.defaultForm=null},methods:{open:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:return t.next=4,e.setData();case 4:case"end":return t.stop()}}),t)})))()},init:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{e.form.id=e.formId}catch(n){console.error("bag.getUserList-error:",n),a=n&&n.data.message||"发生了一些未知的错误，请重试！",e.$message.error(a)}case 1:case"end":return t.stop()}}),t)})))()},setData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h["f"].getBag({id:e.form.id});case 3:a=t.sent,n=a.data.data,e.form=n,t.next=13;break;case 8:t.prev=8,t.t0=t["catch"](0),console.error("bag.getBag-error:",t.t0),r=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(r);case 13:case"end":return t.stop()}}),t,null,[[0,8]])})))()},close:function(){this.$emit("save-success"),this.visible=!1},closed:function(){this.form=u.a.cloneDeep(this.defaultForm)}}},W=M,G=(a("f5d0"),Object(y["a"])(W,q,N,!1,null,"58b7686a",null)),H=G.exports,J={name:"Bag",components:{TableLayout:f["a"],Pagination:m["a"],WarningConfirmButton:d["a"],drivingLicenseFormDialog:F,drivingLicenseFormDialogView:H},data:function(){return{tableData:[],tableLoading:!1,tablePagination:{total:0,pageSize:10,currentPage:1},tableSearchParams:{type:"drivingLicense",name:""},tablePaginationDefault:null,tableSearchParamsDefault:null,tableMultipleSelection:[],dialogVisible:!1,dialogVisibleView:!1,formId:"-1"}},watch:{tableData:{handler:function(e,t){this.$refs.table.doLayout()},immediate:!0}},created:function(){this.loadTableData(),this.tablePaginationDefault=u.a.cloneDeep(this.tablePagination),this.tableSearchParamsDefault=u.a.cloneDeep(this.tableSearchParams)},destroyed:function(){this.tablePaginationDefault=null,this.tableSearchParamsDefault=null},methods:{loadTableData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r,o,i,s,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.tableLoading=!0,a=e.tablePagination.currentPage,n=e.tablePagination.pageSize,r=e.tableSearchParams.type,o=e.tableSearchParams.name,t.prev=5,t.next=8,h["f"].getBagListByPage({page:a,limit:n,type:r,name:o});case 8:i=t.sent,s=i.data.data,e.tableData=s.list,e.tablePagination.total=s.pagination.total,e.tableLoading=!1,t.next=21;break;case 15:t.prev=15,t.t0=t["catch"](5),console.error("bag.getBagListByPage-error:",t.t0),e.tableLoading=!1,l=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(l);case 21:case"end":return t.stop()}}),t,null,[[5,15]])})))()},handleSelectionChange:function(e){this.tableMultipleSelection=e},handleRefresh:function(){this.tablePagination=u.a.cloneDeep(this.tablePaginationDefault),this.tableSearchParams=u.a.cloneDeep(this.tableSearchParamsDefault),this.loadTableData()},handleAdd:function(){this.formId="-1",this.dialogVisible=!0},handleEdit:function(e){this.formId=e.id,this.dialogVisible=!0},handleDelete:function(e,t){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){var r,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.done,o=t.close,n.prev=1,n.next=4,h["f"].deleteBag({ids:[e.id]});case 4:o(),n.next=13;break;case 7:n.prev=7,n.t0=n["catch"](1),console.error("bag.deleteBag-error:",n.t0),r(),i=n.t0&&n.t0.data.message||"发生了一些未知的错误，请重试！",a.$message.error(i);case 13:case"end":return n.stop()}}),n,null,[[1,7]])})))()},handleBulkDelete:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r,o,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.done,r=e.close,a.prev=1,o=u.a.map(t.tableMultipleSelection,"id"),a.next=5,h["f"].deleteBag({ids:o});case 5:r(),a.next=14;break;case 8:a.prev=8,a.t0=a["catch"](1),console.error("bag.deleteBag-error:",a.t0),n(),i=a.t0&&a.t0.data.message||"发生了一些未知的错误，请重试！",t.$message.error(i);case 14:case"end":return a.stop()}}),a,null,[[1,8]])})))()},handleView:function(e){this.formId=e.id,this.dialogVisibleView=!0}}},Q=J,K=(a("0749"),Object(y["a"])(Q,z,O,!1,null,"e19c8008",null)),X=K.exports,Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"driving-license-container"},[a("table-layout",{staticClass:"table-layout",scopedSlots:e._u([{key:"headerLeft",fn:function(){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.handleAdd}},[e._v("新增")]),a("warning-confirm-button",{attrs:{"button-type":"danger",content:"确认批量删除 "+e.tableMultipleSelection.length+" 条数据？",closed:e.handleRefresh},on:{confirm:function(t){e.handleBulkDelete(t)}}},[e._v("批量删除")])]},proxy:!0},{key:"headerRight",fn:function(){return[a("el-input",{staticClass:"search-input",attrs:{size:"mini",placeholder:"请输入姓名"},model:{value:e.tableSearchParams.name,callback:function(t){e.$set(e.tableSearchParams,"name",t)},expression:"tableSearchParams.name"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search",type:"primary"},on:{click:e.loadTableData},slot:"append"},[e._v("搜索")])],1),a("span",{staticClass:"line"},[e._v("|")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-refresh"},on:{click:e.handleRefresh}}),a("el-button",{attrs:{size:"mini",icon:"el-icon-download"}})]},proxy:!0},{key:"pagination",fn:function(){return[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.tablePagination.total>0,expression:"tablePagination.total>0"}],attrs:{total:e.tablePagination.total,page:e.tablePagination.currentPage,limit:e.tablePagination.pageSize},on:{"update:page":function(t){return e.$set(e.tablePagination,"currentPage",t)},"update:limit":function(t){return e.$set(e.tablePagination,"pageSize",t)},pagination:e.loadTableData}})]},proxy:!0}])},[[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"table",staticClass:"has-checkbox",staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"small","header-cell-style":{backgroundColor:"#ebeef4"},border:"",fit:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",width:"30",fixed:"left"}}),a("el-table-column",{attrs:{type:"selection",align:"center",width:"30",fixed:"left"}}),a("el-table-column",{attrs:{prop:"content",label:"号牌号码",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",{staticClass:"link-type",on:{click:function(t){return e.handleEdit(n)}}},[e._v(e._s(n.content.plateNo))])]}}])}),a("el-table-column",{attrs:{prop:"content.vehicleType",label:"准驾车型",align:"center",width:"160"}}),a("el-table-column",{attrs:{prop:"content.model",label:"品牌型号",align:"center",width:"160"}}),a("el-table-column",{attrs:{prop:"content.vin",label:"车辆识别代码",align:"center",width:"160"}}),a("el-table-column",{attrs:{prop:"content.engineNo",label:"发动机号码",align:"center",width:"160"}}),a("el-table-column",{attrs:{label:"操作",width:"150",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleView(t.row)}}},[e._v("详情")]),a("warning-confirm-button",{attrs:{closed:e.handleRefresh},on:{confirm:function(a){e.handleDelete(t.row,a)}}},[e._v("删除")])]}}])})],1)]],2),a("driving-license-form-dialog",{ref:"formDialog",attrs:{"form-id":e.formId},on:{"save-success":e.handleRefresh},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}}),a("driving-license-form-dialog-view",{ref:"formDialogView",attrs:{"form-id":e.formId},model:{value:e.dialogVisibleView,callback:function(t){e.dialogVisibleView=t},expression:"dialogVisibleView"}})],1)},Z=[],ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,width:"50%","close-on-click-modal":!0,"append-to-body":!0,center:!0,visible:e.visible},on:{"update:visible":function(t){e.visible=t},open:e.open,close:e.close,closed:e.closed}},[a("el-form",{ref:"form",attrs:{"label-position":"right",model:e.form,rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"号牌号码","label-width":e.labelWidth,prop:"content.plateNo"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.content.plateNo,callback:function(t){e.$set(e.form.content,"plateNo",t)},expression:"form.content.plateNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"准驾车型","label-width":e.labelWidth,prop:"content.vehicleType"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.content.vehicleType,callback:function(t){e.$set(e.form.content,"vehicleType",t)},expression:"form.content.vehicleType"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"品牌型号","label-width":e.labelWidth,prop:"content.model"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.content.model,callback:function(t){e.$set(e.form.content,"model",t)},expression:"form.content.model"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"车辆识别代码","label-width":"120px",prop:"content.vin"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.content.vin,callback:function(t){e.$set(e.form.content,"vin",t)},expression:"form.content.vin"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发动机号码","label-width":e.labelWidth,prop:"content.engineNo"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.content.engineNo,callback:function(t){e.$set(e.form.content,"engineNo",t)},expression:"form.content.engineNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"姓名","label-width":e.labelWidth,prop:"content.name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.content.name,callback:function(t){e.$set(e.form.content,"name",t)},expression:"form.content.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"注册日期","label-width":e.labelWidth,prop:"content.registerDate"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",align:"right","unlink-panels":""},model:{value:e.form.content.registerDate,callback:function(t){e.$set(e.form.content,"registerDate",t)},expression:"form.content.registerDate"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"发证日期","label-width":e.labelWidth,prop:"content.issueDate"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",align:"right","unlink-panels":""},model:{value:e.form.content.issueDate,callback:function(t){e.$set(e.form.content,"issueDate",t)},expression:"form.content.issueDate"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"检验记录","label-width":e.labelWidth,prop:"content.testRecord"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.content.testRecord,callback:function(t){e.$set(e.form.content,"testRecord",t)},expression:"form.content.testRecord"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"行驶证页照片","label-width":"auto",prop:"content.vehicleLicensePhoto1"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#",accept:"image/png, image/jpeg","show-file-list":!1,"on-success":function(t,a,n){return e.handleUploadSuccess(t,a,n,"vehicleLicensePhoto1")},"on-error":e.handleUploadError,"on-progress":e.handleUploadProgress,"http-request":function(t){return e.upload(t,"vehicleLicensePhoto1")}}},[e.form.content.vehicleLicensePhoto1?a("img",{staticClass:"avatar",attrs:{src:e.VUE_APP_BASE_API+e.form.content.vehicleLicensePhoto1}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("div",{directives:[{name:"show",rawName:"v-show",value:0!==e.uploadProgressPercentVehicleLicensePhoto1,expression:"uploadProgressPercentVehicleLicensePhoto1 !== 0"}],staticClass:"progress-wrapper"},[a("el-progress",{attrs:{type:"circle",percentage:e.uploadProgressPercentVehicleLicensePhoto1}})],1)])],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"驾驶证副页照片","label-width":"auto",prop:"content.vehicleLicensePhoto2"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#",accept:"image/png, image/jpeg","show-file-list":!1,"on-success":function(t,a,n){return e.handleUploadSuccess(t,a,n,"vehicleLicensePhoto2")},"on-error":e.handleUploadError,"on-progress":e.handleUploadProgress,"http-request":function(t){return e.upload(t,"vehicleLicensePhoto2")}}},[e.form.content.vehicleLicensePhoto2?a("img",{staticClass:"avatar",attrs:{src:e.VUE_APP_BASE_API+e.form.content.vehicleLicensePhoto2}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("div",{directives:[{name:"show",rawName:"v-show",value:0!==e.uploadProgressPercentVehicleLicensePhoto2,expression:"uploadProgressPercentVehicleLicensePhoto2 !== 0"}],staticClass:"progress-wrapper"},[a("el-progress",{attrs:{type:"circle",percentage:e.uploadProgressPercentVehicleLicensePhoto2}})],1)])],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-button",{attrs:{size:"mini"},on:{click:e.close}},[e._v("取 消")]),a("el-button",{attrs:{size:"mini",type:"primary",loading:e.saving},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},te=[],ae={components:{},model:{prop:"dialogVisible",event:"close"},props:{dialogVisible:{type:Boolean,required:!0},formId:{type:String,default:"-1"}},data:function(){return{labelWidth:"100px",defaultForm:null,form:{id:"",type:"vehicleLicense",content:{plateNo:"",vehicleType:"",model:"",vin:"",engineNo:"",name:"",registerDate:"",issueDate:"",testRecord:"",vehicleLicensePhoto1:"",vehicleLicensePhoto2:""}},rules:{"content.plateNo":[{required:!0,message:"必填",trigger:"blur"}],"content.vehicleType":[{required:!0,message:"必填",trigger:"blur"}],"content.model":[{required:!0,message:"必填",trigger:"blur"}],"content.vin":[{required:!0,message:"必填",trigger:"blur"}],"content.engineNo":[{required:!0,message:"必填",trigger:"blur"}],"content.name":[{required:!0,message:"必填",trigger:"blur"}],"content.registerDate":[{required:!0,message:"必填",trigger:"blur"}],"content.issueDate":[{required:!0,message:"必填",trigger:"blur"}],"content.testRecord":[{required:!0,message:"必填",trigger:"blur"}],"content.vehicleLicensePhoto1":[{required:!0,message:"必填",trigger:"change"}],"content.vehicleLicensePhoto2":[{required:!0,message:"必填",trigger:"change"}]},loading:!1,saving:!1,uploadProgressPercentVehicleLicensePhoto1:0,uploadProgressPercentVehicleLicensePhoto2:0,loadingSelect:!1,userList:[]}},computed:{visible:{get:function(){return this.dialogVisible},set:function(){this.$emit("close",!1)}},title:function(){return"-1"===this.form.id?"添加行驶证":"编辑行驶证"},classUpperCase:{get:function(){return this.form.content.class},set:function(e){this.form.content.class=e.replace(/[\W]/g,"").toUpperCase()}}},created:function(){this.defaultForm=u.a.cloneDeep(this.form)},destroyed:function(){this.defaultForm=null},methods:{open:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:if("-1"!==e.form.id){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.setData();case 6:case"end":return t.stop()}}),t)})))()},init:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{e.form.id=e.formId}catch(n){console.error("bag.getUserList-error:",n),a=n&&n.data.message||"发生了一些未知的错误，请重试！",e.$message.error(a)}case 1:case"end":return t.stop()}}),t)})))()},setData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h["f"].getBag({id:e.form.id});case 3:a=t.sent,n=a.data.data,r=n.type,o=n.content,e.form.type=r,e.form.content=o,t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](0),console.error("bag.getBag-error:",t.t0),i=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(i);case 15:case"end":return t.stop()}}),t,null,[[0,10]])})))()},close:function(){this.visible=!1,this.saving=!1,this.loading=!1,this.clearValidate()},closed:function(){this.form=u.a.cloneDeep(this.defaultForm)},done:function(){this.saving=!1},validate:function(e){this.$refs.form&&this.$refs.form.validate(e)},resetFields:function(){this.$refs.form&&this.$refs.form.resetFields()},clearValidate:function(e){this.$refs.form&&this.$refs.form.clearValidate(e)},submit:function(){var e=this;this.$refs.form.validate(function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(a){var n,r,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=26;break}if(e.saving=!0,n=u.a.cloneDeep(e.form),r=null,t.prev=4,"-1"!==n.id){t.next=11;break}return t.next=8,h["f"].createBag(n);case 8:r=t.sent,t.next=14;break;case 11:return t.next=13,h["f"].updateBag(n);case 13:r=t.sent;case 14:o=r.data.data,console.log(o),e.$emit("save-success"),e.close(),t.next=26;break;case 20:t.prev=20,t.t0=t["catch"](4),console.error("bag.submitBag-error:",t.t0),e.done(),i=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(i);case 26:case"end":return t.stop()}}),t,null,[[4,20]])})));return function(e){return t.apply(this,arguments)}}())},beforeUpload:function(e){var t="image/jpeg"===e.type,a="image/png"===e.type,n=e.size/1024/1024<100;return t||a?!!n||(this.$message.error("上传头像图片大小不能超过 10MB!"),!1):(this.$message.error("上传头像图片只能是 JPG、PNG 格式!"),!1)},upload:function(e,t){var a=this,n=this.beforeUpload(e.file);n&&(console.log(e),h["h"].upload(e.file.name,e.file,{onUploadProgress:function(n){var r=Math.floor(100*n.loaded/n.total);console.log(r),e.onProgress({percent:r}),a["uploadProgressPercent"+t]=r}}).then((function(n){e.onSuccess(n),setTimeout((function(){a["uploadProgressPercent"+t]=0}),1e3)})).catch((function(t){e.onError(t)})))},handleUploadSuccess:function(e,t,a,n){this.form.content[n]=e.data.data.url,this.clearValidate("content."+n)},handleUploadError:function(e){console.log(e),this.$message({message:"上传失败",type:"error"})},handleUploadProgress:function(e,t,a){console.log(e,t)}}},ne=ae,re=(a("fc90"),Object(y["a"])(ne,ee,te,!1,null,"03b81d40",null)),oe=re.exports,ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,width:"60%","close-on-click-modal":!0,"append-to-body":!0,center:!0,visible:e.visible},on:{"update:visible":function(t){e.visible=t},open:e.open,close:e.close,closed:e.closed}},[a("el-descriptions",{staticClass:"margin-top",attrs:{column:3,border:""}},[a("el-descriptions-item",{attrs:{span:3}},[a("template",{slot:"label"},[e._v(" 号牌号码 ")]),e._v(" "+e._s(e.form.content.plateNo)+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[e._v(" 准驾车型 ")]),e._v(" "+e._s(e.form.content.vehicleType)+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[e._v(" 品牌型号 ")]),e._v(" "+e._s(e.form.content.model)+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[e._v(" 姓名 ")]),e._v(" "+e._s(e.form.content.name)+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[e._v(" 发动机号码 ")]),e._v(" "+e._s(e.form.content.engineNo)+" ")],2),a("el-descriptions-item",{attrs:{span:2}},[a("template",{slot:"label"},[e._v(" 车辆识别代码 ")]),e._v(" "+e._s(e.form.content.vin)+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[e._v(" 注册日期 ")]),e._v(" "+e._s(e.form.content.registerDate)+" ")],2),a("el-descriptions-item",{attrs:{span:2}},[a("template",{slot:"label"},[e._v(" 发证日期 ")]),e._v(" "+e._s(e.form.content.issueDate)+" ")],2),a("el-descriptions-item",{attrs:{span:3}},[a("template",{slot:"label"},[e._v(" 检验记录 ")]),e._v(" "+e._s(e.form.content.testRecord)+" ")],2),a("el-descriptions-item",{attrs:{span:3}},[a("template",{slot:"label"},[e._v(" 行驶证页照片 ")]),a("el-image",{attrs:{src:e.VUE_APP_BASE_API+e.form.content.vehicleLicensePhoto1}})],2),a("el-descriptions-item",{attrs:{span:3}},[a("template",{slot:"label"},[e._v(" 行驶证副页照片 ")]),a("el-image",{attrs:{src:e.VUE_APP_BASE_API+e.form.content.vehicleLicensePhoto2}})],2)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-button",{attrs:{size:"mini"},on:{click:e.close}},[e._v("关 闭")])],1)],1)],1)},se=[],le={components:{},model:{prop:"dialogVisible",event:"close"},props:{dialogVisible:{type:Boolean,required:!0},formId:{type:String,default:"-1"}},data:function(){return{form:{content:{}}}},computed:{visible:{get:function(){return this.dialogVisible},set:function(){this.$emit("close",!1)}},title:function(){return"查看行驶证"}},created:function(){this.defaultForm=u.a.cloneDeep(this.form)},destroyed:function(){this.defaultForm=null},methods:{open:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:return t.next=4,e.setData();case 4:case"end":return t.stop()}}),t)})))()},init:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{e.form.id=e.formId}catch(n){console.error("bag.getUserList-error:",n),a=n&&n.data.message||"发生了一些未知的错误，请重试！",e.$message.error(a)}case 1:case"end":return t.stop()}}),t)})))()},setData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h["f"].getBag({id:e.form.id});case 3:a=t.sent,n=a.data.data,e.form=n,console.log(11,n),t.next=14;break;case 9:t.prev=9,t.t0=t["catch"](0),console.error("bag.getBag-error:",t.t0),r=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(r);case 14:case"end":return t.stop()}}),t,null,[[0,9]])})))()},close:function(){this.visible=!1},closed:function(){this.form=u.a.cloneDeep(this.defaultForm)}}},ce=le,ue=(a("3823"),Object(y["a"])(ce,ie,se,!1,null,"0aa16ee8",null)),de=ue.exports,fe={name:"Bag",components:{TableLayout:f["a"],Pagination:m["a"],WarningConfirmButton:d["a"],drivingLicenseFormDialog:oe,drivingLicenseFormDialogView:de},data:function(){return{tableData:[],tableLoading:!1,tablePagination:{total:0,pageSize:10,currentPage:1},tableSearchParams:{type:"vehicleLicense",name:""},tablePaginationDefault:null,tableSearchParamsDefault:null,tableMultipleSelection:[],dialogVisible:!1,dialogVisibleView:!1,formId:"-1"}},watch:{tableData:{handler:function(e,t){this.$refs.table.doLayout()},immediate:!0}},created:function(){this.loadTableData(),this.tablePaginationDefault=u.a.cloneDeep(this.tablePagination),this.tableSearchParamsDefault=u.a.cloneDeep(this.tableSearchParams)},destroyed:function(){this.tablePaginationDefault=null,this.tableSearchParamsDefault=null},methods:{loadTableData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r,o,i,s,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.tableLoading=!0,a=e.tablePagination.currentPage,n=e.tablePagination.pageSize,r=e.tableSearchParams.type,o=e.tableSearchParams.name,t.prev=5,t.next=8,h["f"].getBagListByPage({page:a,limit:n,type:r,name:o});case 8:i=t.sent,s=i.data.data,e.tableData=s.list,e.tablePagination.total=s.pagination.total,e.tableLoading=!1,t.next=21;break;case 15:t.prev=15,t.t0=t["catch"](5),console.error("bag.getBagListByPage-error:",t.t0),e.tableLoading=!1,l=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(l);case 21:case"end":return t.stop()}}),t,null,[[5,15]])})))()},handleSelectionChange:function(e){this.tableMultipleSelection=e},handleRefresh:function(){this.tablePagination=u.a.cloneDeep(this.tablePaginationDefault),this.tableSearchParams=u.a.cloneDeep(this.tableSearchParamsDefault),this.loadTableData()},handleAdd:function(){this.formId="-1",this.dialogVisible=!0},handleEdit:function(e){this.formId=e.id,this.dialogVisible=!0},handleDelete:function(e,t){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){var r,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.done,o=t.close,n.prev=1,n.next=4,h["f"].deleteBag({ids:[e.id]});case 4:o(),n.next=13;break;case 7:n.prev=7,n.t0=n["catch"](1),console.error("bag.deleteBag-error:",n.t0),r(),i=n.t0&&n.t0.data.message||"发生了一些未知的错误，请重试！",a.$message.error(i);case 13:case"end":return n.stop()}}),n,null,[[1,7]])})))()},handleBulkDelete:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r,o,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.done,r=e.close,a.prev=1,o=u.a.map(t.tableMultipleSelection,"id"),a.next=5,h["f"].deleteBag({ids:o});case 5:r(),a.next=14;break;case 8:a.prev=8,a.t0=a["catch"](1),console.error("bag.deleteBag-error:",a.t0),n(),i=a.t0&&a.t0.data.message||"发生了一些未知的错误，请重试！",t.$message.error(i);case 14:case"end":return a.stop()}}),a,null,[[1,8]])})))()},handleView:function(e){this.formId=e.id,this.dialogVisibleView=!0}}},me=fe,pe=(a("7476a"),Object(y["a"])(me,Y,Z,!1,null,"2a91d698",null)),ge=pe.exports,he=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"marriage-registration-container"},[a("table-layout",{staticClass:"table-layout",scopedSlots:e._u([{key:"headerLeft",fn:function(){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.handleAdd}},[e._v("新增")]),a("warning-confirm-button",{attrs:{"button-type":"danger",content:"确认批量删除 "+e.tableMultipleSelection.length+" 条数据？",closed:e.handleRefresh},on:{confirm:function(t){e.handleBulkDelete(t)}}},[e._v("批量删除")])]},proxy:!0},{key:"headerRight",fn:function(){return[a("el-input",{staticClass:"search-input",attrs:{size:"mini",placeholder:"请输入姓名"},model:{value:e.tableSearchParams.name,callback:function(t){e.$set(e.tableSearchParams,"name",t)},expression:"tableSearchParams.name"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search",type:"primary"},on:{click:e.loadTableData},slot:"append"},[e._v("搜索")])],1),a("span",{staticClass:"line"},[e._v("|")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-refresh"},on:{click:e.handleRefresh}}),a("el-button",{attrs:{size:"mini",icon:"el-icon-download"}})]},proxy:!0},{key:"pagination",fn:function(){return[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.tablePagination.total>0,expression:"tablePagination.total>0"}],attrs:{total:e.tablePagination.total,page:e.tablePagination.currentPage,limit:e.tablePagination.pageSize},on:{"update:page":function(t){return e.$set(e.tablePagination,"currentPage",t)},"update:limit":function(t){return e.$set(e.tablePagination,"pageSize",t)},pagination:e.loadTableData}})]},proxy:!0}])},[[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"table",staticClass:"has-checkbox",staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"small","header-cell-style":{backgroundColor:"#ebeef4"},border:"",fit:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",width:"30",fixed:"left"}}),a("el-table-column",{attrs:{type:"selection",align:"center",width:"30",fixed:"left"}}),a("el-table-column",{attrs:{prop:"content",label:"姓名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",{staticClass:"link-type",on:{click:function(t){return e.handleEdit(n)}}},[e._v(e._s(n.content.name))])]}}])}),a("el-table-column",{attrs:{prop:"content.registrationDate",label:"登记日期",align:"center",width:"160"}}),a("el-table-column",{attrs:{prop:"content.issuingAuthority",label:"签发机关",align:"center",width:"260"}}),a("el-table-column",{attrs:{label:"操作",width:"150",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleView(t.row)}}},[e._v("详情")]),a("warning-confirm-button",{attrs:{closed:e.handleRefresh},on:{confirm:function(a){e.handleDelete(t.row,a)}}},[e._v("删除")])]}}])})],1)]],2),a("marriage-registration-form-dialog",{ref:"formDialog",attrs:{"form-id":e.formId},on:{"save-success":e.handleRefresh},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}}),a("marriage-registration-form-dialog-view",{ref:"formDialogView",attrs:{"form-id":e.formId},model:{value:e.dialogVisibleView,callback:function(t){e.dialogVisibleView=t},expression:"dialogVisibleView"}})],1)},be=[],ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,width:"50%","close-on-click-modal":!0,"append-to-body":!0,center:!0,visible:e.visible},on:{"update:visible":function(t){e.visible=t},open:e.open,close:e.close,closed:e.closed}},[a("el-form",{ref:"form",attrs:{"label-position":"right",model:e.form,rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"姓名","label-width":e.labelWidth,prop:"content.name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.content.name,callback:function(t){e.$set(e.form.content,"name",t)},expression:"form.content.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"登记日期","label-width":e.labelWidth,prop:"content.registrationDate"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",size:"mini",align:"right","unlink-panels":""},model:{value:e.form.content.registrationDate,callback:function(t){e.$set(e.form.content,"registrationDate",t)},expression:"form.content.registrationDate"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"签发机关","label-width":e.labelWidth,prop:"content.issuingAuthority"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.content.issuingAuthority,callback:function(t){e.$set(e.form.content,"issuingAuthority",t)},expression:"form.content.issuingAuthority"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"结婚证照片","label-width":"auto",prop:"content.marriageRegistrationPhoto1"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#",accept:"image/png, image/jpeg","show-file-list":!1,"on-success":function(t,a,n){return e.handleUploadSuccess(t,a,n,"marriageRegistrationPhoto1")},"on-error":e.handleUploadError,"on-progress":e.handleUploadProgress,"http-request":function(t){return e.upload(t,"marriageRegistrationPhoto1")}}},[e.form.content.marriageRegistrationPhoto1?a("img",{staticClass:"avatar",attrs:{src:e.VUE_APP_BASE_API+e.form.content.marriageRegistrationPhoto1}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("div",{directives:[{name:"show",rawName:"v-show",value:0!==e.uploadProgressPercentMarriageRegistrationPhoto1,expression:"uploadProgressPercentMarriageRegistrationPhoto1 !== 0"}],staticClass:"progress-wrapper"},[a("el-progress",{attrs:{type:"circle",percentage:e.uploadProgressPercentMarriageRegistrationPhoto1}})],1)])],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-button",{attrs:{size:"mini"},on:{click:e.close}},[e._v("取 消")]),a("el-button",{attrs:{size:"mini",type:"primary",loading:e.saving},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},we=[],Pe={components:{},model:{prop:"dialogVisible",event:"close"},props:{dialogVisible:{type:Boolean,required:!0},formId:{type:String,default:"-1"}},data:function(){return{labelWidth:"100px",defaultForm:null,form:{id:"",type:"marriageRegistration",content:{name:"",registrationDate:"",issuingAuthority:"",marriageRegistrationPhoto1:""}},rules:{"content.name":[{required:!0,message:"必填",trigger:"blur"}],"content.registrationDate":[{required:!0,message:"必填",trigger:"blur"}],"content.issuingAuthority":[{required:!0,message:"必填",trigger:"blur"}],"content.marriageRegistrationPhoto1":[{required:!0,message:"必填",trigger:"change"}]},loading:!1,saving:!1,uploadProgressPercentMarriageRegistrationPhoto1:0,loadingSelect:!1,userList:[]}},computed:{visible:{get:function(){return this.dialogVisible},set:function(){this.$emit("close",!1)}},title:function(){return"-1"===this.form.id?"添加结婚证":"编辑结婚证"}},created:function(){this.defaultForm=u.a.cloneDeep(this.form)},destroyed:function(){this.defaultForm=null},methods:{open:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:if("-1"!==e.form.id){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.setData();case 6:case"end":return t.stop()}}),t)})))()},init:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{e.form.id=e.formId}catch(n){console.error("bag.getUserList-error:",n),a=n&&n.data.message||"发生了一些未知的错误，请重试！",e.$message.error(a)}case 1:case"end":return t.stop()}}),t)})))()},setData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h["f"].getBag({id:e.form.id});case 3:a=t.sent,n=a.data.data,r=n.type,o=n.content,e.form.type=r,e.form.content=o,t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](0),console.error("bag.getBag-error:",t.t0),i=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(i);case 15:case"end":return t.stop()}}),t,null,[[0,10]])})))()},close:function(){this.visible=!1,this.saving=!1,this.loading=!1,this.clearValidate()},closed:function(){this.form=u.a.cloneDeep(this.defaultForm)},done:function(){this.saving=!1},validate:function(e){this.$refs.form&&this.$refs.form.validate(e)},resetFields:function(){this.$refs.form&&this.$refs.form.resetFields()},clearValidate:function(e){this.$refs.form&&this.$refs.form.clearValidate(e)},submit:function(){var e=this;this.$refs.form.validate(function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(a){var n,r,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=26;break}if(e.saving=!0,n=u.a.cloneDeep(e.form),r=null,t.prev=4,"-1"!==n.id){t.next=11;break}return t.next=8,h["f"].createBag(n);case 8:r=t.sent,t.next=14;break;case 11:return t.next=13,h["f"].updateBag(n);case 13:r=t.sent;case 14:o=r.data.data,console.log(o),e.$emit("save-success"),e.close(),t.next=26;break;case 20:t.prev=20,t.t0=t["catch"](4),console.error("bag.submitBag-error:",t.t0),e.done(),i=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(i);case 26:case"end":return t.stop()}}),t,null,[[4,20]])})));return function(e){return t.apply(this,arguments)}}())},beforeUpload:function(e){var t="image/jpeg"===e.type,a="image/png"===e.type,n=e.size/1024/1024<100;return t||a?!!n||(this.$message.error("上传头像图片大小不能超过 10MB!"),!1):(this.$message.error("上传头像图片只能是 JPG、PNG 格式!"),!1)},upload:function(e,t){var a=this,n=this.beforeUpload(e.file);n&&(console.log(e),h["h"].upload(e.file.name,e.file,{onUploadProgress:function(n){var r=Math.floor(100*n.loaded/n.total);console.log(r),e.onProgress({percent:r}),a["uploadProgressPercent"+t]=r}}).then((function(n){e.onSuccess(n),setTimeout((function(){a["uploadProgressPercent"+t]=0}),1e3)})).catch((function(t){e.onError(t)})))},handleUploadSuccess:function(e,t,a,n){this.form.content[n]=e.data.data.url,this.clearValidate("content."+n)},handleUploadError:function(e){console.log(e),this.$message({message:"上传失败",type:"error"})},handleUploadProgress:function(e,t,a){console.log(e,t)}}},ye=Pe,xe=(a("9239"),Object(y["a"])(ye,ve,we,!1,null,"18948eca",null)),ke=xe.exports,_e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,width:"60%","close-on-click-modal":!0,"append-to-body":!0,center:!0,visible:e.visible},on:{"update:visible":function(t){e.visible=t},open:e.open,close:e.close,closed:e.closed}},[a("el-descriptions",{staticClass:"margin-top",attrs:{column:3,border:""}},[a("el-descriptions-item",[a("template",{slot:"label"},[e._v(" 姓名 ")]),e._v(" "+e._s(e.form.content.name)+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[e._v(" 登记日期 ")]),e._v(" "+e._s(e.form.content.registrationDate)+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[e._v(" 签发机关 ")]),e._v(" "+e._s(e.form.content.issuingAuthority)+" ")],2),a("el-descriptions-item",{attrs:{span:3}},[a("template",{slot:"label"},[e._v(" 结婚证照片 ")]),a("el-image",{attrs:{src:e.VUE_APP_BASE_API+e.form.content.marriageRegistrationPhoto1}})],2)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-button",{attrs:{size:"mini"},on:{click:e.close}},[e._v("关 闭")])],1)],1)],1)},De=[],Se={components:{},model:{prop:"dialogVisible",event:"close"},props:{dialogVisible:{type:Boolean,required:!0},formId:{type:String,default:"-1"}},data:function(){return{form:{content:{}}}},computed:{visible:{get:function(){return this.dialogVisible},set:function(){this.$emit("close",!1)}},title:function(){return"查看结婚证"}},created:function(){this.defaultForm=u.a.cloneDeep(this.form)},destroyed:function(){this.defaultForm=null},methods:{open:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:return t.next=4,e.setData();case 4:case"end":return t.stop()}}),t)})))()},init:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{e.form.id=e.formId}catch(n){console.error("bag.getUserList-error:",n),a=n&&n.data.message||"发生了一些未知的错误，请重试！",e.$message.error(a)}case 1:case"end":return t.stop()}}),t)})))()},setData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h["f"].getBag({id:e.form.id});case 3:a=t.sent,n=a.data.data,e.form=n,t.next=13;break;case 8:t.prev=8,t.t0=t["catch"](0),console.error("bag.getBag-error:",t.t0),r=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(r);case 13:case"end":return t.stop()}}),t,null,[[0,8]])})))()},close:function(){this.$emit("save-success"),this.visible=!1},closed:function(){this.form=u.a.cloneDeep(this.defaultForm)}}},$e=Se,Ve=(a("c9e3"),Object(y["a"])($e,_e,De,!1,null,"ba828f3e",null)),Re=Ve.exports,Ce={name:"Bag",components:{TableLayout:f["a"],Pagination:m["a"],WarningConfirmButton:d["a"],marriageRegistrationFormDialog:ke,marriageRegistrationFormDialogView:Re},data:function(){return{tableData:[],tableLoading:!1,tablePagination:{total:0,pageSize:10,currentPage:1},tableSearchParams:{type:"marriageRegistration",name:""},tablePaginationDefault:null,tableSearchParamsDefault:null,tableMultipleSelection:[],dialogVisible:!1,dialogVisibleView:!1,formId:"-1"}},watch:{tableData:{handler:function(e,t){this.$refs.table.doLayout()},immediate:!0}},created:function(){this.loadTableData(),this.tablePaginationDefault=u.a.cloneDeep(this.tablePagination),this.tableSearchParamsDefault=u.a.cloneDeep(this.tableSearchParams)},destroyed:function(){this.tablePaginationDefault=null,this.tableSearchParamsDefault=null},methods:{loadTableData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r,o,i,s,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.tableLoading=!0,a=e.tablePagination.currentPage,n=e.tablePagination.pageSize,r=e.tableSearchParams.type,o=e.tableSearchParams.name,t.prev=5,t.next=8,h["f"].getBagListByPage({page:a,limit:n,type:r,name:o});case 8:i=t.sent,s=i.data.data,e.tableData=s.list,e.tablePagination.total=s.pagination.total,e.tableLoading=!1,t.next=21;break;case 15:t.prev=15,t.t0=t["catch"](5),console.error("bag.getBagListByPage-error:",t.t0),e.tableLoading=!1,l=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(l);case 21:case"end":return t.stop()}}),t,null,[[5,15]])})))()},handleSelectionChange:function(e){this.tableMultipleSelection=e},handleRefresh:function(){this.tablePagination=u.a.cloneDeep(this.tablePaginationDefault),this.tableSearchParams=u.a.cloneDeep(this.tableSearchParamsDefault),this.loadTableData()},handleAdd:function(){this.formId="-1",this.dialogVisible=!0},handleEdit:function(e){this.formId=e.id,this.dialogVisible=!0},handleDelete:function(e,t){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){var r,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.done,o=t.close,n.prev=1,n.next=4,h["f"].deleteBag({ids:[e.id]});case 4:o(),n.next=13;break;case 7:n.prev=7,n.t0=n["catch"](1),console.error("bag.deleteBag-error:",n.t0),r(),i=n.t0&&n.t0.data.message||"发生了一些未知的错误，请重试！",a.$message.error(i);case 13:case"end":return n.stop()}}),n,null,[[1,7]])})))()},handleBulkDelete:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r,o,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.done,r=e.close,a.prev=1,o=u.a.map(t.tableMultipleSelection,"id"),a.next=5,h["f"].deleteBag({ids:o});case 5:r(),a.next=14;break;case 8:a.prev=8,a.t0=a["catch"](1),console.error("bag.deleteBag-error:",a.t0),n(),i=a.t0&&a.t0.data.message||"发生了一些未知的错误，请重试！",t.$message.error(i);case 14:case"end":return a.stop()}}),a,null,[[1,8]])})))()},handleView:function(e){this.formId=e.id,this.dialogVisibleView=!0}}},Be=Ce,Le=(a("39ada"),Object(y["a"])(Be,he,be,!1,null,"39e89421",null)),je=Le.exports,ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ownership-certificate-container"},[a("table-layout",{staticClass:"table-layout",scopedSlots:e._u([{key:"headerLeft",fn:function(){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.handleAdd}},[e._v("新增")]),a("warning-confirm-button",{attrs:{"button-type":"danger",content:"确认批量删除 "+e.tableMultipleSelection.length+" 条数据？",closed:e.handleRefresh},on:{confirm:function(t){e.handleBulkDelete(t)}}},[e._v("批量删除")])]},proxy:!0},{key:"headerRight",fn:function(){return[a("el-input",{staticClass:"search-input",attrs:{size:"mini",placeholder:"请输入名称"},model:{value:e.tableSearchParams.name,callback:function(t){e.$set(e.tableSearchParams,"name",t)},expression:"tableSearchParams.name"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search",type:"primary"},on:{click:e.loadTableData},slot:"append"},[e._v("搜索")])],1),a("span",{staticClass:"line"},[e._v("|")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-refresh"},on:{click:e.handleRefresh}}),a("el-button",{attrs:{size:"mini",icon:"el-icon-download"}})]},proxy:!0},{key:"pagination",fn:function(){return[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.tablePagination.total>0,expression:"tablePagination.total>0"}],attrs:{total:e.tablePagination.total,page:e.tablePagination.currentPage,limit:e.tablePagination.pageSize},on:{"update:page":function(t){return e.$set(e.tablePagination,"currentPage",t)},"update:limit":function(t){return e.$set(e.tablePagination,"pageSize",t)},pagination:e.loadTableData}})]},proxy:!0}])},[[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"table",staticClass:"has-checkbox",staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"small","header-cell-style":{backgroundColor:"#ebeef4"},border:"",fit:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",width:"30",fixed:"left"}}),a("el-table-column",{attrs:{type:"selection",align:"center",width:"30",fixed:"left"}}),a("el-table-column",{attrs:{prop:"content",label:"名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",{staticClass:"link-type",on:{click:function(t){return e.handleEdit(n)}}},[e._v(e._s(n.content.name))])]}}])}),a("el-table-column",{attrs:{prop:"content.registrationDate",label:"登记日期",align:"center",width:"160"}}),a("el-table-column",{attrs:{label:"操作",width:"150",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleView(t.row)}}},[e._v("详情")]),a("warning-confirm-button",{attrs:{closed:e.handleRefresh},on:{confirm:function(a){e.handleDelete(t.row,a)}}},[e._v("删除")])]}}])})],1)]],2),a("ownership-certificate-form-dialog",{ref:"formDialog",attrs:{"form-id":e.formId},on:{"save-success":e.handleRefresh},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}}),a("ownership-certificate-form-dialog-view",{ref:"formDialogView",attrs:{"form-id":e.formId},model:{value:e.dialogVisibleView,callback:function(t){e.dialogVisibleView=t},expression:"dialogVisibleView"}})],1)},Oe=[],Ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,width:"50%","close-on-click-modal":!0,"append-to-body":!0,center:!0,visible:e.visible},on:{"update:visible":function(t){e.visible=t},open:e.open,close:e.close,closed:e.closed}},[a("el-form",{ref:"form",attrs:{"label-position":"right",model:e.form,rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"名称","label-width":e.labelWidth,prop:"content.name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.content.name,callback:function(t){e.$set(e.form.content,"name",t)},expression:"form.content.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"登记日期","label-width":e.labelWidth,prop:"content.registrationDate"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",size:"mini",align:"right","unlink-panels":""},model:{value:e.form.content.registrationDate,callback:function(t){e.$set(e.form.content,"registrationDate",t)},expression:"form.content.registrationDate"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产权证照片","label-width":"auto",prop:"content.ownershipCertificatePhoto1"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#",accept:"image/png, image/jpeg","show-file-list":!1,"on-success":function(t,a,n){return e.handleUploadSuccess(t,a,n,"ownershipCertificatePhoto1")},"on-error":e.handleUploadError,"on-progress":e.handleUploadProgress,"http-request":function(t){return e.upload(t,"ownershipCertificatePhoto1")}}},[e.form.content.ownershipCertificatePhoto1?a("img",{staticClass:"avatar",attrs:{src:e.VUE_APP_BASE_API+e.form.content.ownershipCertificatePhoto1}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("div",{directives:[{name:"show",rawName:"v-show",value:0!==e.uploadProgressPercentOwnershipCertificatePhoto1,expression:"uploadProgressPercentOwnershipCertificatePhoto1 !== 0"}],staticClass:"progress-wrapper"},[a("el-progress",{attrs:{type:"circle",percentage:e.uploadProgressPercentOwnershipCertificatePhoto1}})],1)])],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-button",{attrs:{size:"mini"},on:{click:e.close}},[e._v("取 消")]),a("el-button",{attrs:{size:"mini",type:"primary",loading:e.saving},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},Ue=[],Ae={components:{},model:{prop:"dialogVisible",event:"close"},props:{dialogVisible:{type:Boolean,required:!0},formId:{type:String,default:"-1"}},data:function(){return{labelWidth:"100px",defaultForm:null,form:{id:"",type:"ownershipCertificate",content:{name:"",registrationDate:"",ownershipCertificatePhoto1:""}},rules:{"content.name":[{required:!0,message:"必填",trigger:"blur"}],"content.registrationDate":[{required:!0,message:"必填",trigger:"blur"}],"content.ownershipCertificatePhoto1":[{required:!0,message:"必填",trigger:"change"}]},loading:!1,saving:!1,uploadProgressPercentOwnershipCertificatePhoto1:0,loadingSelect:!1,userList:[]}},computed:{visible:{get:function(){return this.dialogVisible},set:function(){this.$emit("close",!1)}},title:function(){return"-1"===this.form.id?"添加产权证":"编辑产权证"}},created:function(){this.defaultForm=u.a.cloneDeep(this.form)},destroyed:function(){this.defaultForm=null},methods:{open:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:if("-1"!==e.form.id){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.setData();case 6:case"end":return t.stop()}}),t)})))()},init:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{e.form.id=e.formId}catch(n){console.error("bag.getUserList-error:",n),a=n&&n.data.message||"发生了一些未知的错误，请重试！",e.$message.error(a)}case 1:case"end":return t.stop()}}),t)})))()},setData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h["f"].getBag({id:e.form.id});case 3:a=t.sent,n=a.data.data,r=n.type,o=n.content,e.form.type=r,e.form.content=o,t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](0),console.error("bag.getBag-error:",t.t0),i=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(i);case 15:case"end":return t.stop()}}),t,null,[[0,10]])})))()},close:function(){this.visible=!1,this.saving=!1,this.loading=!1,this.clearValidate()},closed:function(){this.form=u.a.cloneDeep(this.defaultForm)},done:function(){this.saving=!1},validate:function(e){this.$refs.form&&this.$refs.form.validate(e)},resetFields:function(){this.$refs.form&&this.$refs.form.resetFields()},clearValidate:function(e){this.$refs.form&&this.$refs.form.clearValidate(e)},submit:function(){var e=this;this.$refs.form.validate(function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(a){var n,r,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=26;break}if(e.saving=!0,n=u.a.cloneDeep(e.form),r=null,t.prev=4,"-1"!==n.id){t.next=11;break}return t.next=8,h["f"].createBag(n);case 8:r=t.sent,t.next=14;break;case 11:return t.next=13,h["f"].updateBag(n);case 13:r=t.sent;case 14:o=r.data.data,console.log(o),e.$emit("save-success"),e.close(),t.next=26;break;case 20:t.prev=20,t.t0=t["catch"](4),console.error("bag.submitBag-error:",t.t0),e.done(),i=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(i);case 26:case"end":return t.stop()}}),t,null,[[4,20]])})));return function(e){return t.apply(this,arguments)}}())},beforeUpload:function(e){var t="image/jpeg"===e.type,a="image/png"===e.type,n=e.size/1024/1024<100;return t||a?!!n||(this.$message.error("上传头像图片大小不能超过 10MB!"),!1):(this.$message.error("上传头像图片只能是 JPG、PNG 格式!"),!1)},upload:function(e,t){var a=this,n=this.beforeUpload(e.file);n&&(console.log(e),h["h"].upload(e.file.name,e.file,{onUploadProgress:function(n){var r=Math.floor(100*n.loaded/n.total);console.log(r),e.onProgress({percent:r}),a["uploadProgressPercent"+t]=r}}).then((function(n){e.onSuccess(n),setTimeout((function(){a["uploadProgressPercent"+t]=0}),1e3)})).catch((function(t){e.onError(t)})))},handleUploadSuccess:function(e,t,a,n){this.form.content[n]=e.data.data.url,this.clearValidate("content."+n)},handleUploadError:function(e){console.log(e),this.$message({message:"上传失败",type:"error"})},handleUploadProgress:function(e,t,a){console.log(e,t)}}},Ie=Ae,Te=(a("89b0"),Object(y["a"])(Ie,Ee,Ue,!1,null,"0d320a07",null)),Fe=Te.exports,qe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,width:"60%","close-on-click-modal":!0,"append-to-body":!0,center:!0,visible:e.visible},on:{"update:visible":function(t){e.visible=t},open:e.open,close:e.close,closed:e.closed}},[a("el-descriptions",{staticClass:"margin-top",attrs:{column:3,border:""}},[a("el-descriptions-item",{attrs:{span:2}},[a("template",{slot:"label"},[e._v(" 名称 ")]),e._v(" "+e._s(e.form.content.name)+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[e._v(" 登记日期 ")]),e._v(" "+e._s(e.form.content.registrationDate)+" ")],2),a("el-descriptions-item",{attrs:{span:3}},[a("template",{slot:"label"},[e._v(" 产权证照片 ")]),a("el-image",{attrs:{src:e.VUE_APP_BASE_API+e.form.content.ownershipCertificatePhoto1}})],2)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-button",{attrs:{size:"mini"},on:{click:e.close}},[e._v("关 闭")])],1)],1)],1)},Ne=[],Me={components:{},model:{prop:"dialogVisible",event:"close"},props:{dialogVisible:{type:Boolean,required:!0},formId:{type:String,default:"-1"}},data:function(){return{form:{content:{}}}},computed:{visible:{get:function(){return this.dialogVisible},set:function(){this.$emit("close",!1)}},title:function(){return"查看产权证"}},created:function(){this.defaultForm=u.a.cloneDeep(this.form)},destroyed:function(){this.defaultForm=null},methods:{open:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:return t.next=4,e.setData();case 4:case"end":return t.stop()}}),t)})))()},init:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{e.form.id=e.formId}catch(n){console.error("bag.getUserList-error:",n),a=n&&n.data.message||"发生了一些未知的错误，请重试！",e.$message.error(a)}case 1:case"end":return t.stop()}}),t)})))()},setData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h["f"].getBag({id:e.form.id});case 3:a=t.sent,n=a.data.data,e.form=n,t.next=13;break;case 8:t.prev=8,t.t0=t["catch"](0),console.error("bag.getBag-error:",t.t0),r=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(r);case 13:case"end":return t.stop()}}),t,null,[[0,8]])})))()},close:function(){this.$emit("save-success"),this.visible=!1},closed:function(){this.form=u.a.cloneDeep(this.defaultForm)}}},We=Me,Ge=(a("4ae6"),Object(y["a"])(We,qe,Ne,!1,null,"2e8bd9a2",null)),He=Ge.exports,Je={name:"Bag",components:{TableLayout:f["a"],Pagination:m["a"],WarningConfirmButton:d["a"],ownershipCertificateFormDialog:Fe,ownershipCertificateFormDialogView:He},data:function(){return{tableData:[],tableLoading:!1,tablePagination:{total:0,pageSize:10,currentPage:1},tableSearchParams:{type:"ownershipCertificate",name:""},tablePaginationDefault:null,tableSearchParamsDefault:null,tableMultipleSelection:[],dialogVisible:!1,dialogVisibleView:!1,formId:"-1"}},watch:{tableData:{handler:function(e,t){this.$refs.table.doLayout()},immediate:!0}},created:function(){this.loadTableData(),this.tablePaginationDefault=u.a.cloneDeep(this.tablePagination),this.tableSearchParamsDefault=u.a.cloneDeep(this.tableSearchParams)},destroyed:function(){this.tablePaginationDefault=null,this.tableSearchParamsDefault=null},methods:{loadTableData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r,o,i,s,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.tableLoading=!0,a=e.tablePagination.currentPage,n=e.tablePagination.pageSize,r=e.tableSearchParams.type,o=e.tableSearchParams.name,t.prev=5,t.next=8,h["f"].getBagListByPage({page:a,limit:n,type:r,name:o});case 8:i=t.sent,s=i.data.data,e.tableData=s.list,e.tablePagination.total=s.pagination.total,e.tableLoading=!1,t.next=21;break;case 15:t.prev=15,t.t0=t["catch"](5),console.error("bag.getBagListByPage-error:",t.t0),e.tableLoading=!1,l=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(l);case 21:case"end":return t.stop()}}),t,null,[[5,15]])})))()},handleSelectionChange:function(e){this.tableMultipleSelection=e},handleRefresh:function(){this.tablePagination=u.a.cloneDeep(this.tablePaginationDefault),this.tableSearchParams=u.a.cloneDeep(this.tableSearchParamsDefault),this.loadTableData()},handleAdd:function(){this.formId="-1",this.dialogVisible=!0},handleEdit:function(e){this.formId=e.id,this.dialogVisible=!0},handleDelete:function(e,t){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){var r,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.done,o=t.close,n.prev=1,n.next=4,h["f"].deleteBag({ids:[e.id]});case 4:o(),n.next=13;break;case 7:n.prev=7,n.t0=n["catch"](1),console.error("bag.deleteBag-error:",n.t0),r(),i=n.t0&&n.t0.data.message||"发生了一些未知的错误，请重试！",a.$message.error(i);case 13:case"end":return n.stop()}}),n,null,[[1,7]])})))()},handleBulkDelete:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r,o,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.done,r=e.close,a.prev=1,o=u.a.map(t.tableMultipleSelection,"id"),a.next=5,h["f"].deleteBag({ids:o});case 5:r(),a.next=14;break;case 8:a.prev=8,a.t0=a["catch"](1),console.error("bag.deleteBag-error:",a.t0),n(),i=a.t0&&a.t0.data.message||"发生了一些未知的错误，请重试！",t.$message.error(i);case 14:case"end":return a.stop()}}),a,null,[[1,8]])})))()},handleView:function(e){this.formId=e.id,this.dialogVisibleView=!0}}},Qe=Je,Ke=(a("fd90"),Object(y["a"])(Qe,ze,Oe,!1,null,"69b84ab3",null)),Xe=Ke.exports,Ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"birth-certificate-container"},[a("table-layout",{staticClass:"table-layout",scopedSlots:e._u([{key:"headerLeft",fn:function(){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.handleAdd}},[e._v("新增")]),a("warning-confirm-button",{attrs:{"button-type":"danger",content:"确认批量删除 "+e.tableMultipleSelection.length+" 条数据？",closed:e.handleRefresh},on:{confirm:function(t){e.handleBulkDelete(t)}}},[e._v("批量删除")])]},proxy:!0},{key:"headerRight",fn:function(){return[a("el-input",{staticClass:"search-input",attrs:{size:"mini",placeholder:"请输入名称"},model:{value:e.tableSearchParams.name,callback:function(t){e.$set(e.tableSearchParams,"name",t)},expression:"tableSearchParams.name"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search",type:"primary"},on:{click:e.loadTableData},slot:"append"},[e._v("搜索")])],1),a("span",{staticClass:"line"},[e._v("|")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-refresh"},on:{click:e.handleRefresh}}),a("el-button",{attrs:{size:"mini",icon:"el-icon-download"}})]},proxy:!0},{key:"pagination",fn:function(){return[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.tablePagination.total>0,expression:"tablePagination.total>0"}],attrs:{total:e.tablePagination.total,page:e.tablePagination.currentPage,limit:e.tablePagination.pageSize},on:{"update:page":function(t){return e.$set(e.tablePagination,"currentPage",t)},"update:limit":function(t){return e.$set(e.tablePagination,"pageSize",t)},pagination:e.loadTableData}})]},proxy:!0}])},[[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"table",staticClass:"has-checkbox",staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"small","header-cell-style":{backgroundColor:"#ebeef4"},border:"",fit:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",width:"30",fixed:"left"}}),a("el-table-column",{attrs:{type:"selection",align:"center",width:"30",fixed:"left"}}),a("el-table-column",{attrs:{prop:"content",label:"姓名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",{staticClass:"link-type",on:{click:function(t){return e.handleEdit(n)}}},[e._v(e._s(n.content.name))])]}}])}),a("el-table-column",{attrs:{prop:"content.birthTime",label:"出生时间",align:"center",width:"160"}}),a("el-table-column",{attrs:{label:"操作",width:"150",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleView(t.row)}}},[e._v("详情")]),a("warning-confirm-button",{attrs:{closed:e.handleRefresh},on:{confirm:function(a){e.handleDelete(t.row,a)}}},[e._v("删除")])]}}])})],1)]],2),a("birth-certificate-form-dialog",{ref:"formDialog",attrs:{"form-id":e.formId},on:{"save-success":e.handleRefresh},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}}),a("birth-certificate-form-dialog-view",{ref:"formDialogView",attrs:{"form-id":e.formId},model:{value:e.dialogVisibleView,callback:function(t){e.dialogVisibleView=t},expression:"dialogVisibleView"}})],1)},Ze=[],et=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,width:"50%","close-on-click-modal":!0,"append-to-body":!0,center:!0,visible:e.visible},on:{"update:visible":function(t){e.visible=t},open:e.open,close:e.close,closed:e.closed}},[a("el-form",{ref:"form",attrs:{"label-position":"right",model:e.form,rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"姓名","label-width":e.labelWidth,prop:"content.name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.content.name,callback:function(t){e.$set(e.form.content,"name",t)},expression:"form.content.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"出生时间","label-width":e.labelWidth,prop:"content.birthTime"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",size:"mini",align:"right","unlink-panels":""},model:{value:e.form.content.birthTime,callback:function(t){e.$set(e.form.content,"birthTime",t)},expression:"form.content.birthTime"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"出生证照片","label-width":"auto",prop:"content.birthCertificatePhoto1"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#",accept:"image/png, image/jpeg","show-file-list":!1,"on-success":function(t,a,n){return e.handleUploadSuccess(t,a,n,"birthCertificatePhoto1")},"on-error":e.handleUploadError,"on-progress":e.handleUploadProgress,"http-request":function(t){return e.upload(t,"birthCertificatePhoto1")}}},[e.form.content.birthCertificatePhoto1?a("img",{staticClass:"avatar",attrs:{src:e.VUE_APP_BASE_API+e.form.content.birthCertificatePhoto1}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("div",{directives:[{name:"show",rawName:"v-show",value:0!==e.uploadProgressPercentBirthCertificatePhoto1,expression:"uploadProgressPercentBirthCertificatePhoto1 !== 0"}],staticClass:"progress-wrapper"},[a("el-progress",{attrs:{type:"circle",percentage:e.uploadProgressPercentBirthCertificatePhoto1}})],1)])],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-button",{attrs:{size:"mini"},on:{click:e.close}},[e._v("取 消")]),a("el-button",{attrs:{size:"mini",type:"primary",loading:e.saving},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},tt=[],at={components:{},model:{prop:"dialogVisible",event:"close"},props:{dialogVisible:{type:Boolean,required:!0},formId:{type:String,default:"-1"}},data:function(){return{labelWidth:"100px",defaultForm:null,form:{id:"",type:"birthCertificate",content:{name:"",birthTime:"",birthCertificatePhoto1:""}},rules:{"content.name":[{required:!0,message:"必填",trigger:"blur"}],"content.birthTime":[{required:!0,message:"必填",trigger:"blur"}],"content.birthCertificatePhoto1":[{required:!0,message:"必填",trigger:"change"}]},loading:!1,saving:!1,uploadProgressPercentBirthCertificatePhoto1:0,loadingSelect:!1,userList:[]}},computed:{visible:{get:function(){return this.dialogVisible},set:function(){this.$emit("close",!1)}},title:function(){return"-1"===this.form.id?"添加出生证":"编辑出生证"}},created:function(){this.defaultForm=u.a.cloneDeep(this.form)},destroyed:function(){this.defaultForm=null},methods:{open:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:if("-1"!==e.form.id){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.setData();case 6:case"end":return t.stop()}}),t)})))()},init:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{e.form.id=e.formId}catch(n){console.error("bag.getUserList-error:",n),a=n&&n.data.message||"发生了一些未知的错误，请重试！",e.$message.error(a)}case 1:case"end":return t.stop()}}),t)})))()},setData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h["f"].getBag({id:e.form.id});case 3:a=t.sent,n=a.data.data,r=n.type,o=n.content,e.form.type=r,e.form.content=o,t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](0),console.error("bag.getBag-error:",t.t0),i=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(i);case 15:case"end":return t.stop()}}),t,null,[[0,10]])})))()},close:function(){this.visible=!1,this.saving=!1,this.loading=!1,this.clearValidate()},closed:function(){this.form=u.a.cloneDeep(this.defaultForm)},done:function(){this.saving=!1},validate:function(e){this.$refs.form&&this.$refs.form.validate(e)},resetFields:function(){this.$refs.form&&this.$refs.form.resetFields()},clearValidate:function(e){this.$refs.form&&this.$refs.form.clearValidate(e)},submit:function(){var e=this;this.$refs.form.validate(function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(a){var n,r,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=26;break}if(e.saving=!0,n=u.a.cloneDeep(e.form),r=null,t.prev=4,"-1"!==n.id){t.next=11;break}return t.next=8,h["f"].createBag(n);case 8:r=t.sent,t.next=14;break;case 11:return t.next=13,h["f"].updateBag(n);case 13:r=t.sent;case 14:o=r.data.data,console.log(o),e.$emit("save-success"),e.close(),t.next=26;break;case 20:t.prev=20,t.t0=t["catch"](4),console.error("bag.submitBag-error:",t.t0),e.done(),i=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(i);case 26:case"end":return t.stop()}}),t,null,[[4,20]])})));return function(e){return t.apply(this,arguments)}}())},beforeUpload:function(e){var t="image/jpeg"===e.type,a="image/png"===e.type,n=e.size/1024/1024<100;return t||a?!!n||(this.$message.error("上传头像图片大小不能超过 10MB!"),!1):(this.$message.error("上传头像图片只能是 JPG、PNG 格式!"),!1)},upload:function(e,t){var a=this,n=this.beforeUpload(e.file);n&&(console.log(e),h["h"].upload(e.file.name,e.file,{onUploadProgress:function(n){var r=Math.floor(100*n.loaded/n.total);console.log(r),e.onProgress({percent:r}),a["uploadProgressPercent"+t]=r}}).then((function(n){e.onSuccess(n),setTimeout((function(){a["uploadProgressPercent"+t]=0}),1e3)})).catch((function(t){e.onError(t)})))},handleUploadSuccess:function(e,t,a,n){this.form.content[n]=e.data.data.url,this.clearValidate("content."+n)},handleUploadError:function(e){console.log(e),this.$message({message:"上传失败",type:"error"})},handleUploadProgress:function(e,t,a){console.log(e,t)}}},nt=at,rt=(a("d597"),Object(y["a"])(nt,et,tt,!1,null,"fabe2f9a",null)),ot=rt.exports,it=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,width:"60%","close-on-click-modal":!0,"append-to-body":!0,center:!0,visible:e.visible},on:{"update:visible":function(t){e.visible=t},open:e.open,close:e.close,closed:e.closed}},[a("el-descriptions",{staticClass:"margin-top",attrs:{column:3,border:""}},[a("el-descriptions-item",{attrs:{span:2}},[a("template",{slot:"label"},[e._v(" 姓名 ")]),e._v(" "+e._s(e.form.content.name)+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[e._v(" 出生时间 ")]),e._v(" "+e._s(e.form.content.birthTime)+" ")],2),a("el-descriptions-item",{attrs:{span:3}},[a("template",{slot:"label"},[e._v(" 出生证照片 ")]),a("el-image",{attrs:{src:e.VUE_APP_BASE_API+e.form.content.birthCertificatePhoto1}})],2)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-button",{attrs:{size:"mini"},on:{click:e.close}},[e._v("关 闭")])],1)],1)],1)},st=[],lt={components:{},model:{prop:"dialogVisible",event:"close"},props:{dialogVisible:{type:Boolean,required:!0},formId:{type:String,default:"-1"}},data:function(){return{form:{content:{}}}},computed:{visible:{get:function(){return this.dialogVisible},set:function(){this.$emit("close",!1)}},title:function(){return"查看出生证"}},created:function(){this.defaultForm=u.a.cloneDeep(this.form)},destroyed:function(){this.defaultForm=null},methods:{open:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:return t.next=4,e.setData();case 4:case"end":return t.stop()}}),t)})))()},init:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{e.form.id=e.formId}catch(n){console.error("bag.getUserList-error:",n),a=n&&n.data.message||"发生了一些未知的错误，请重试！",e.$message.error(a)}case 1:case"end":return t.stop()}}),t)})))()},setData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h["f"].getBag({id:e.form.id});case 3:a=t.sent,n=a.data.data,e.form=n,t.next=13;break;case 8:t.prev=8,t.t0=t["catch"](0),console.error("bag.getBag-error:",t.t0),r=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(r);case 13:case"end":return t.stop()}}),t,null,[[0,8]])})))()},close:function(){this.$emit("save-success"),this.visible=!1},closed:function(){this.form=u.a.cloneDeep(this.defaultForm)}}},ct=lt,ut=(a("52da"),Object(y["a"])(ct,it,st,!1,null,"a8efd9fa",null)),dt=ut.exports,ft={name:"Bag",components:{TableLayout:f["a"],Pagination:m["a"],WarningConfirmButton:d["a"],birthCertificateFormDialog:ot,birthCertificateFormDialogView:dt},data:function(){return{tableData:[],tableLoading:!1,tablePagination:{total:0,pageSize:10,currentPage:1},tableSearchParams:{type:"birthCertificate",name:""},tablePaginationDefault:null,tableSearchParamsDefault:null,tableMultipleSelection:[],dialogVisible:!1,dialogVisibleView:!1,formId:"-1"}},watch:{tableData:{handler:function(e,t){this.$refs.table.doLayout()},immediate:!0}},created:function(){this.loadTableData(),this.tablePaginationDefault=u.a.cloneDeep(this.tablePagination),this.tableSearchParamsDefault=u.a.cloneDeep(this.tableSearchParams)},destroyed:function(){this.tablePaginationDefault=null,this.tableSearchParamsDefault=null},methods:{loadTableData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r,o,i,s,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.tableLoading=!0,a=e.tablePagination.currentPage,n=e.tablePagination.pageSize,r=e.tableSearchParams.type,o=e.tableSearchParams.name,t.prev=5,t.next=8,h["f"].getBagListByPage({page:a,limit:n,type:r,name:o});case 8:i=t.sent,s=i.data.data,e.tableData=s.list,e.tablePagination.total=s.pagination.total,e.tableLoading=!1,t.next=21;break;case 15:t.prev=15,t.t0=t["catch"](5),console.error("bag.getBagListByPage-error:",t.t0),e.tableLoading=!1,l=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(l);case 21:case"end":return t.stop()}}),t,null,[[5,15]])})))()},handleSelectionChange:function(e){this.tableMultipleSelection=e},handleRefresh:function(){this.tablePagination=u.a.cloneDeep(this.tablePaginationDefault),this.tableSearchParams=u.a.cloneDeep(this.tableSearchParamsDefault),this.loadTableData()},handleAdd:function(){this.formId="-1",this.dialogVisible=!0},handleEdit:function(e){this.formId=e.id,this.dialogVisible=!0},handleDelete:function(e,t){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){var r,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.done,o=t.close,n.prev=1,n.next=4,h["f"].deleteBag({ids:[e.id]});case 4:o(),n.next=13;break;case 7:n.prev=7,n.t0=n["catch"](1),console.error("bag.deleteBag-error:",n.t0),r(),i=n.t0&&n.t0.data.message||"发生了一些未知的错误，请重试！",a.$message.error(i);case 13:case"end":return n.stop()}}),n,null,[[1,7]])})))()},handleBulkDelete:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r,o,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.done,r=e.close,a.prev=1,o=u.a.map(t.tableMultipleSelection,"id"),a.next=5,h["f"].deleteBag({ids:o});case 5:r(),a.next=14;break;case 8:a.prev=8,a.t0=a["catch"](1),console.error("bag.deleteBag-error:",a.t0),n(),i=a.t0&&a.t0.data.message||"发生了一些未知的错误，请重试！",t.$message.error(i);case 14:case"end":return a.stop()}}),a,null,[[1,8]])})))()},handleView:function(e){this.formId=e.id,this.dialogVisibleView=!0}}},mt=ft,pt=(a("773c"),Object(y["a"])(mt,Ye,Ze,!1,null,"02686116",null)),gt=pt.exports,ht=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"business-license-container"},[a("table-layout",{staticClass:"table-layout",scopedSlots:e._u([{key:"headerLeft",fn:function(){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.handleAdd}},[e._v("新增")]),a("warning-confirm-button",{attrs:{"button-type":"danger",content:"确认批量删除 "+e.tableMultipleSelection.length+" 条数据？",closed:e.handleRefresh},on:{confirm:function(t){e.handleBulkDelete(t)}}},[e._v("批量删除")])]},proxy:!0},{key:"headerRight",fn:function(){return[a("el-input",{staticClass:"search-input",attrs:{size:"mini",placeholder:"请输入名称"},model:{value:e.tableSearchParams.name,callback:function(t){e.$set(e.tableSearchParams,"name",t)},expression:"tableSearchParams.name"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search",type:"primary"},on:{click:e.loadTableData},slot:"append"},[e._v("搜索")])],1),a("span",{staticClass:"line"},[e._v("|")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-refresh"},on:{click:e.handleRefresh}}),a("el-button",{attrs:{size:"mini",icon:"el-icon-download"}})]},proxy:!0},{key:"pagination",fn:function(){return[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.tablePagination.total>0,expression:"tablePagination.total>0"}],attrs:{total:e.tablePagination.total,page:e.tablePagination.currentPage,limit:e.tablePagination.pageSize},on:{"update:page":function(t){return e.$set(e.tablePagination,"currentPage",t)},"update:limit":function(t){return e.$set(e.tablePagination,"pageSize",t)},pagination:e.loadTableData}})]},proxy:!0}])},[[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"table",staticClass:"has-checkbox",staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"small","header-cell-style":{backgroundColor:"#ebeef4"},border:"",fit:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",width:"30",fixed:"left"}}),a("el-table-column",{attrs:{type:"selection",align:"center",width:"30",fixed:"left"}}),a("el-table-column",{attrs:{prop:"content",label:"名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",{staticClass:"link-type",on:{click:function(t){return e.handleEdit(n)}}},[e._v(e._s(n.content.name))])]}}])}),a("el-table-column",{attrs:{prop:"content",label:"营业期限",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e._v(" "+e._s(a.content.businessTerm&&a.content.businessTerm[0]||"")+" ~ "+e._s(a.content.businessTerm&&a.content.businessTerm[1]||"")+" ")]}}])}),a("el-table-column",{attrs:{label:"操作",width:"150",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleView(t.row)}}},[e._v("详情")]),a("warning-confirm-button",{attrs:{closed:e.handleRefresh},on:{confirm:function(a){e.handleDelete(t.row,a)}}},[e._v("删除")])]}}])})],1)]],2),a("business-license-form-dialog",{ref:"formDialog",attrs:{"form-id":e.formId},on:{"save-success":e.handleRefresh},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}}),a("business-license-form-dialog-view",{ref:"formDialogView",attrs:{"form-id":e.formId},model:{value:e.dialogVisibleView,callback:function(t){e.dialogVisibleView=t},expression:"dialogVisibleView"}})],1)},bt=[],vt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,width:"50%","close-on-click-modal":!0,"append-to-body":!0,center:!0,visible:e.visible},on:{"update:visible":function(t){e.visible=t},open:e.open,close:e.close,closed:e.closed}},[a("el-form",{ref:"form",attrs:{"label-position":"right",model:e.form,rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"名称","label-width":e.labelWidth,prop:"content.name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.content.name,callback:function(t){e.$set(e.form.content,"name",t)},expression:"form.content.name"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"营业期限","label-width":e.labelWidth,prop:"content.businessTerm"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.form.content.businessTerm,callback:function(t){e.$set(e.form.content,"businessTerm",t)},expression:"form.content.businessTerm"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"统一社会信用代码","label-width":e.labelWidth,prop:"content.unifiedSocialCreditCode"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.content.unifiedSocialCreditCode,callback:function(t){e.$set(e.form.content,"unifiedSocialCreditCode",t)},expression:"form.content.unifiedSocialCreditCode"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"营业执照照片","label-width":"auto",prop:"content.businessLicensePhoto1"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#",accept:"image/png, image/jpeg","show-file-list":!1,"on-success":function(t,a,n){return e.handleUploadSuccess(t,a,n,"businessLicensePhoto1")},"on-error":e.handleUploadError,"on-progress":e.handleUploadProgress,"http-request":function(t){return e.upload(t,"businessLicensePhoto1")}}},[e.form.content.businessLicensePhoto1?a("img",{staticClass:"avatar",attrs:{src:e.VUE_APP_BASE_API+e.form.content.businessLicensePhoto1}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("div",{directives:[{name:"show",rawName:"v-show",value:0!==e.uploadProgressPercentbusinessLicensePhoto1,expression:"uploadProgressPercentbusinessLicensePhoto1 !== 0"}],staticClass:"progress-wrapper"},[a("el-progress",{attrs:{type:"circle",percentage:e.uploadProgressPercentbusinessLicensePhoto1}})],1)])],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-button",{attrs:{size:"mini"},on:{click:e.close}},[e._v("取 消")]),a("el-button",{attrs:{size:"mini",type:"primary",loading:e.saving},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},wt=[],Pt={components:{},model:{prop:"dialogVisible",event:"close"},props:{dialogVisible:{type:Boolean,required:!0},formId:{type:String,default:"-1"}},data:function(){return{labelWidth:"100px",defaultForm:null,form:{id:"",type:"businessLicense",content:{name:"",businessTerm:"",unifiedSocialCreditCode:"",businessLicensePhoto1:""}},rules:{"content.name":[{required:!0,message:"必填",trigger:"blur"}],"content.businessTerm":[{required:!0,message:"必填",trigger:"blur"}],"content.unifiedSocialCreditCode":[{required:!0,message:"必填",trigger:"blur"}],"content.businessLicensePhoto1":[{required:!0,message:"必填",trigger:"change"}]},loading:!1,saving:!1,uploadProgressPercentbusinessLicensePhoto1:0,loadingSelect:!1,userList:[]}},computed:{visible:{get:function(){return this.dialogVisible},set:function(){this.$emit("close",!1)}},title:function(){return"-1"===this.form.id?"添加营业执照":"编辑营业执照"}},created:function(){this.defaultForm=u.a.cloneDeep(this.form)},destroyed:function(){this.defaultForm=null},methods:{open:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:if("-1"!==e.form.id){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.setData();case 6:case"end":return t.stop()}}),t)})))()},init:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{e.form.id=e.formId}catch(n){console.error("bag.getUserList-error:",n),a=n&&n.data.message||"发生了一些未知的错误，请重试！",e.$message.error(a)}case 1:case"end":return t.stop()}}),t)})))()},setData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h["f"].getBag({id:e.form.id});case 3:a=t.sent,n=a.data.data,r=n.type,o=n.content,e.form.type=r,e.form.content=o,t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](0),console.error("bag.getBag-error:",t.t0),i=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(i);case 15:case"end":return t.stop()}}),t,null,[[0,10]])})))()},close:function(){this.visible=!1,this.saving=!1,this.loading=!1,this.clearValidate()},closed:function(){this.form=u.a.cloneDeep(this.defaultForm)},done:function(){this.saving=!1},validate:function(e){this.$refs.form&&this.$refs.form.validate(e)},resetFields:function(){this.$refs.form&&this.$refs.form.resetFields()},clearValidate:function(e){this.$refs.form&&this.$refs.form.clearValidate(e)},submit:function(){var e=this;this.$refs.form.validate(function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(a){var n,r,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=26;break}if(e.saving=!0,n=u.a.cloneDeep(e.form),r=null,t.prev=4,"-1"!==n.id){t.next=11;break}return t.next=8,h["f"].createBag(n);case 8:r=t.sent,t.next=14;break;case 11:return t.next=13,h["f"].updateBag(n);case 13:r=t.sent;case 14:o=r.data.data,console.log(o),e.$emit("save-success"),e.close(),t.next=26;break;case 20:t.prev=20,t.t0=t["catch"](4),console.error("bag.submitBag-error:",t.t0),e.done(),i=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(i);case 26:case"end":return t.stop()}}),t,null,[[4,20]])})));return function(e){return t.apply(this,arguments)}}())},beforeUpload:function(e){var t="image/jpeg"===e.type,a="image/png"===e.type,n=e.size/1024/1024<100;return t||a?!!n||(this.$message.error("上传头像图片大小不能超过 10MB!"),!1):(this.$message.error("上传头像图片只能是 JPG、PNG 格式!"),!1)},upload:function(e,t){var a=this,n=this.beforeUpload(e.file);n&&(console.log(e),h["h"].upload(e.file.name,e.file,{onUploadProgress:function(n){var r=Math.floor(100*n.loaded/n.total);console.log(r),e.onProgress({percent:r}),a["uploadProgressPercent"+t]=r}}).then((function(n){e.onSuccess(n),setTimeout((function(){a["uploadProgressPercent"+t]=0}),1e3)})).catch((function(t){e.onError(t)})))},handleUploadSuccess:function(e,t,a,n){this.form.content[n]=e.data.data.url,this.clearValidate("content."+n)},handleUploadError:function(e){console.log(e),this.$message({message:"上传失败",type:"error"})},handleUploadProgress:function(e,t,a){console.log(e,t)}}},yt=Pt,xt=(a("6d02"),Object(y["a"])(yt,vt,wt,!1,null,"606724ce",null)),kt=xt.exports,_t=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,width:"60%","close-on-click-modal":!0,"append-to-body":!0,center:!0,visible:e.visible},on:{"update:visible":function(t){e.visible=t},open:e.open,close:e.close,closed:e.closed}},[a("el-descriptions",{staticClass:"margin-top",attrs:{column:3,border:""}},[a("el-descriptions-item",{attrs:{span:2}},[a("template",{slot:"label"},[e._v(" 名称 ")]),e._v(" "+e._s(e.form.content.name)+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[e._v(" 营业期限 ")]),e._v(" "+e._s(e.form.content.businessTerm&&e.form.content.businessTerm[0]||"")+" ~ "+e._s(e.form.content.businessTerm&&e.form.content.businessTerm[1]||"")+" ")],2),a("el-descriptions-item",{attrs:{span:3}},[a("template",{slot:"label"},[e._v(" 统一社会信用代码 ")]),e._v(" "+e._s(e.form.content.unifiedSocialCreditCode)+" ")],2),a("el-descriptions-item",{attrs:{span:3}},[a("template",{slot:"label"},[e._v(" 营业执照照片 ")]),a("el-image",{attrs:{src:e.VUE_APP_BASE_API+e.form.content.businessLicensePhoto1}})],2)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-button",{attrs:{size:"mini"},on:{click:e.close}},[e._v("关 闭")])],1)],1)],1)},Dt=[],St={components:{},model:{prop:"dialogVisible",event:"close"},props:{dialogVisible:{type:Boolean,required:!0},formId:{type:String,default:"-1"}},data:function(){return{form:{content:{}}}},computed:{visible:{get:function(){return this.dialogVisible},set:function(){this.$emit("close",!1)}},title:function(){return"查看营业执照"}},created:function(){this.defaultForm=u.a.cloneDeep(this.form)},destroyed:function(){this.defaultForm=null},methods:{open:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:return t.next=4,e.setData();case 4:case"end":return t.stop()}}),t)})))()},init:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{e.form.id=e.formId}catch(n){console.error("bag.getUserList-error:",n),a=n&&n.data.message||"发生了一些未知的错误，请重试！",e.$message.error(a)}case 1:case"end":return t.stop()}}),t)})))()},setData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h["f"].getBag({id:e.form.id});case 3:a=t.sent,n=a.data.data,e.form=n,t.next=13;break;case 8:t.prev=8,t.t0=t["catch"](0),console.error("bag.getBag-error:",t.t0),r=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(r);case 13:case"end":return t.stop()}}),t,null,[[0,8]])})))()},close:function(){this.$emit("save-success"),this.visible=!1},closed:function(){this.form=u.a.cloneDeep(this.defaultForm)}}},$t=St,Vt=(a("547c"),Object(y["a"])($t,_t,Dt,!1,null,"79561f66",null)),Rt=Vt.exports,Ct={name:"Bag",components:{TableLayout:f["a"],Pagination:m["a"],WarningConfirmButton:d["a"],businessLicenseFormDialog:kt,businessLicenseFormDialogView:Rt},data:function(){return{tableData:[],tableLoading:!1,tablePagination:{total:0,pageSize:10,currentPage:1},tableSearchParams:{type:"businessLicense",name:""},tablePaginationDefault:null,tableSearchParamsDefault:null,tableMultipleSelection:[],dialogVisible:!1,dialogVisibleView:!1,formId:"-1"}},watch:{tableData:{handler:function(e,t){this.$refs.table.doLayout()},immediate:!0}},created:function(){this.loadTableData(),this.tablePaginationDefault=u.a.cloneDeep(this.tablePagination),this.tableSearchParamsDefault=u.a.cloneDeep(this.tableSearchParams)},destroyed:function(){this.tablePaginationDefault=null,this.tableSearchParamsDefault=null},methods:{loadTableData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r,o,i,s,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.tableLoading=!0,a=e.tablePagination.currentPage,n=e.tablePagination.pageSize,r=e.tableSearchParams.type,o=e.tableSearchParams.name,t.prev=5,t.next=8,h["f"].getBagListByPage({page:a,limit:n,type:r,name:o});case 8:i=t.sent,s=i.data.data,e.tableData=s.list,e.tablePagination.total=s.pagination.total,e.tableLoading=!1,t.next=21;break;case 15:t.prev=15,t.t0=t["catch"](5),console.error("bag.getBagListByPage-error:",t.t0),e.tableLoading=!1,l=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(l);case 21:case"end":return t.stop()}}),t,null,[[5,15]])})))()},handleSelectionChange:function(e){this.tableMultipleSelection=e},handleRefresh:function(){this.tablePagination=u.a.cloneDeep(this.tablePaginationDefault),this.tableSearchParams=u.a.cloneDeep(this.tableSearchParamsDefault),this.loadTableData()},handleAdd:function(){this.formId="-1",this.dialogVisible=!0},handleEdit:function(e){this.formId=e.id,this.dialogVisible=!0},handleDelete:function(e,t){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){var r,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.done,o=t.close,n.prev=1,n.next=4,h["f"].deleteBag({ids:[e.id]});case 4:o(),n.next=13;break;case 7:n.prev=7,n.t0=n["catch"](1),console.error("bag.deleteBag-error:",n.t0),r(),i=n.t0&&n.t0.data.message||"发生了一些未知的错误，请重试！",a.$message.error(i);case 13:case"end":return n.stop()}}),n,null,[[1,7]])})))()},handleBulkDelete:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r,o,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.done,r=e.close,a.prev=1,o=u.a.map(t.tableMultipleSelection,"id"),a.next=5,h["f"].deleteBag({ids:o});case 5:r(),a.next=14;break;case 8:a.prev=8,a.t0=a["catch"](1),console.error("bag.deleteBag-error:",a.t0),n(),i=a.t0&&a.t0.data.message||"发生了一些未知的错误，请重试！",t.$message.error(i);case 14:case"end":return a.stop()}}),a,null,[[1,8]])})))()},handleView:function(e){this.formId=e.id,this.dialogVisibleView=!0}}},Bt=Ct,Lt=(a("95c1"),Object(y["a"])(Bt,ht,bt,!1,null,"f60f5e2e",null)),jt=Lt.exports,zt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"household-register-container"},[a("table-layout",{staticClass:"table-layout",scopedSlots:e._u([{key:"headerLeft",fn:function(){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.handleAdd}},[e._v("新增")]),a("warning-confirm-button",{attrs:{"button-type":"danger",content:"确认批量删除 "+e.tableMultipleSelection.length+" 条数据？",closed:e.handleRefresh},on:{confirm:function(t){e.handleBulkDelete(t)}}},[e._v("批量删除")])]},proxy:!0},{key:"headerRight",fn:function(){return[a("el-input",{staticClass:"search-input",attrs:{size:"mini",placeholder:"请输入名称"},model:{value:e.tableSearchParams.name,callback:function(t){e.$set(e.tableSearchParams,"name",t)},expression:"tableSearchParams.name"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search",type:"primary"},on:{click:e.loadTableData},slot:"append"},[e._v("搜索")])],1),a("span",{staticClass:"line"},[e._v("|")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-refresh"},on:{click:e.handleRefresh}}),a("el-button",{attrs:{size:"mini",icon:"el-icon-download"}})]},proxy:!0},{key:"pagination",fn:function(){return[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.tablePagination.total>0,expression:"tablePagination.total>0"}],attrs:{total:e.tablePagination.total,page:e.tablePagination.currentPage,limit:e.tablePagination.pageSize},on:{"update:page":function(t){return e.$set(e.tablePagination,"currentPage",t)},"update:limit":function(t){return e.$set(e.tablePagination,"pageSize",t)},pagination:e.loadTableData}})]},proxy:!0}])},[[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"table",staticClass:"has-checkbox",staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"small","header-cell-style":{backgroundColor:"#ebeef4"},border:"",fit:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",width:"30",fixed:"left"}}),a("el-table-column",{attrs:{type:"selection",align:"center",width:"30",fixed:"left"}}),a("el-table-column",{attrs:{prop:"content",label:"名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("span",{staticClass:"link-type",on:{click:function(t){return e.handleEdit(n)}}},[e._v(e._s(n.content.name))])]}}])}),a("el-table-column",{attrs:{prop:"content.typeOfHousehold",label:"户别",align:"center",width:"160"}}),a("el-table-column",{attrs:{prop:"content.householdNo",label:"户号",align:"center",width:"160"}}),a("el-table-column",{attrs:{label:"操作",width:"150",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return e.handleView(t.row)}}},[e._v("详情")]),a("warning-confirm-button",{attrs:{closed:e.handleRefresh},on:{confirm:function(a){e.handleDelete(t.row,a)}}},[e._v("删除")])]}}])})],1)]],2),a("household-register-form-dialog",{ref:"formDialog",attrs:{"form-id":e.formId},on:{"save-success":e.handleRefresh},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}}),a("household-register-form-dialog-view",{ref:"formDialogView",attrs:{"form-id":e.formId},model:{value:e.dialogVisibleView,callback:function(t){e.dialogVisibleView=t},expression:"dialogVisibleView"}})],1)},Ot=[],Et=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,width:"50%","close-on-click-modal":!0,"append-to-body":!0,center:!0,visible:e.visible},on:{"update:visible":function(t){e.visible=t},open:e.open,close:e.close,closed:e.closed}},[a("el-form",{ref:"form",attrs:{"label-position":"right",model:e.form,rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"名称","label-width":e.labelWidth,prop:"content.name"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.content.name,callback:function(t){e.$set(e.form.content,"name",t)},expression:"form.content.name"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"户别","label-width":e.labelWidth,prop:"content.typeOfHousehold"}},[a("el-radio",{attrs:{label:"家庭户口"},model:{value:e.form.content.typeOfHousehold,callback:function(t){e.$set(e.form.content,"typeOfHousehold",t)},expression:"form.content.typeOfHousehold"}},[e._v("家庭户口")]),a("el-radio",{attrs:{label:"集体户口"},model:{value:e.form.content.typeOfHousehold,callback:function(t){e.$set(e.form.content,"typeOfHousehold",t)},expression:"form.content.typeOfHousehold"}},[e._v("集体户口")])],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"户号","label-width":e.labelWidth,prop:"content.householdNo"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.content.householdNo,callback:function(t){e.$set(e.form.content,"householdNo",t)},expression:"form.content.householdNo"}})],1)],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"户口本照片","label-width":e.labelWidth,prop:"content.householdRegisterPhotoList"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#",accept:"image/png, image/jpeg","on-success":function(t,a,n){return e.handleUploadSuccess(t,a,n,"householdRegisterPhotoList")},"on-error":e.handleUploadError,"on-progress":e.handleUploadProgress,"http-request":function(t){return e.upload(t,"householdRegisterPhotoList")},"on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.form.content.householdRegisterPhotoList,"list-type":"picture"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过2Mb")])],1)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-button",{attrs:{size:"mini"},on:{click:e.close}},[e._v("取 消")]),a("el-button",{attrs:{size:"mini",type:"primary",loading:e.saving},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},Ut=[],At={components:{},model:{prop:"dialogVisible",event:"close"},props:{dialogVisible:{type:Boolean,required:!0},formId:{type:String,default:"-1"}},data:function(){return{labelWidth:"100px",defaultForm:null,form:{id:"",type:"householdRegister",content:{name:"",householdNo:"",typeOfHousehold:"家庭户口",householdRegisterPhotoList:[]}},rules:{"content.name":[{required:!0,message:"必填",trigger:"blur"}],"content.householdNo":[{required:!0,message:"必填",trigger:"blur"}],"content.typeOfHousehold":[{required:!0,message:"必填",trigger:"blur"}],"content.householdRegisterPhotoList":[{required:!0,message:"必填",trigger:"change"}]},loading:!1,saving:!1,uploadProgressPercenthouseholdRegisterPhotoList:0,loadingSelect:!1,userList:[]}},computed:{visible:{get:function(){return this.dialogVisible},set:function(){this.$emit("close",!1)}},title:function(){return"-1"===this.form.id?"添加户口本":"编辑户口本"}},created:function(){this.defaultForm=u.a.cloneDeep(this.form)},destroyed:function(){this.defaultForm=null},methods:{open:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:if("-1"!==e.form.id){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.setData();case 6:case"end":return t.stop()}}),t)})))()},init:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{e.form.id=e.formId}catch(n){console.error("bag.getUserList-error:",n),a=n&&n.data.message||"发生了一些未知的错误，请重试！",e.$message.error(a)}case 1:case"end":return t.stop()}}),t)})))()},setData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h["f"].getBag({id:e.form.id});case 3:a=t.sent,n=a.data.data,r=n.type,i=n.content,e.form.type=r,e.form.content=i,e.form.content.householdRegisterPhotoList=e.form.content.householdRegisterPhotoList.map((function(t){return Object(o["a"])(Object(o["a"])({},t),{},{url:e.VUE_APP_BASE_API+t.url})})),t.next=16;break;case 11:t.prev=11,t.t0=t["catch"](0),console.error("bag.getBag-error:",t.t0),s=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(s);case 16:case"end":return t.stop()}}),t,null,[[0,11]])})))()},close:function(){this.visible=!1,this.saving=!1,this.loading=!1,this.clearValidate()},closed:function(){this.form=u.a.cloneDeep(this.defaultForm)},done:function(){this.saving=!1},validate:function(e){this.$refs.form&&this.$refs.form.validate(e)},resetFields:function(){this.$refs.form&&this.$refs.form.resetFields()},clearValidate:function(e){this.$refs.form&&this.$refs.form.clearValidate(e)},submit:function(){var e=this;this.$refs.form.validate(function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(a){var n,r,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=27;break}if(e.saving=!0,n=u.a.cloneDeep(e.form),n.content.householdRegisterPhotoList=n.content.householdRegisterPhotoList.map((function(t){return Object(o["a"])(Object(o["a"])({},t),{},{url:t.url.replace(e.VUE_APP_BASE_API,"")})})),r=null,t.prev=5,"-1"!==n.id){t.next=12;break}return t.next=9,h["f"].createBag(n);case 9:r=t.sent,t.next=15;break;case 12:return t.next=14,h["f"].updateBag(n);case 14:r=t.sent;case 15:i=r.data.data,console.log(i),e.$emit("save-success"),e.close(),t.next=27;break;case 21:t.prev=21,t.t0=t["catch"](5),console.error("bag.submitBag-error:",t.t0),e.done(),s=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(s);case 27:case"end":return t.stop()}}),t,null,[[5,21]])})));return function(e){return t.apply(this,arguments)}}())},beforeUpload:function(e){var t="image/jpeg"===e.type,a="image/png"===e.type,n=e.size/1024/1024<100;return t||a?!!n||(this.$message.error("上传头像图片大小不能超过 10MB!"),!1):(this.$message.error("上传头像图片只能是 JPG、PNG 格式!"),!1)},upload:function(e,t){var a=this,n=this.beforeUpload(e.file);n&&(console.log(e),h["h"].upload(e.file.name,e.file,{onUploadProgress:function(n){var r=Math.floor(100*n.loaded/n.total);console.log(r),e.onProgress({percent:r}),a["uploadProgressPercent"+t]=r}}).then((function(n){e.onSuccess(n),setTimeout((function(){a["uploadProgressPercent"+t]=0}),1e3)})).catch((function(t){e.onError(t)})))},handleUploadSuccess:function(e,t,a,n){t.url=this.VUE_APP_BASE_API+e.data.data.url,this.form.content[n]=a,this.clearValidate("content."+n)},handleUploadError:function(e){console.log(e),this.$message({message:"上传失败",type:"error"})},handleUploadProgress:function(e,t,a){console.log(e,t)},handleRemove:function(e,t){this.fileList=t,console.log(e,t)},handlePreview:function(e){console.log(e)}}},It=At,Tt=(a("cd3d"),Object(y["a"])(It,Et,Ut,!1,null,"170db786",null)),Ft=Tt.exports,qt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,width:"60%","close-on-click-modal":!0,"append-to-body":!0,center:!0,visible:e.visible},on:{"update:visible":function(t){e.visible=t},open:e.open,close:e.close,closed:e.closed}},[a("el-descriptions",{staticClass:"margin-top",attrs:{column:3,border:""}},[a("el-descriptions-item",[a("template",{slot:"label"},[e._v(" 名称 ")]),e._v(" "+e._s(e.form.content.name)+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[e._v(" 户别 ")]),e._v(" "+e._s(e.form.content.typeOfHousehold)+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[e._v(" 户号 ")]),e._v(" "+e._s(e.form.content.householdNo)+" ")],2),a("el-descriptions-item",{attrs:{span:3}},[a("template",{slot:"label"},[e._v(" 户口本照片 ")]),a("div",e._l(e.form.content.householdRegisterPhotoList,(function(t,n){return a("el-image",{key:n,attrs:{src:e.VUE_APP_BASE_API+t.url}})})),1)],2)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-button",{attrs:{size:"mini"},on:{click:e.close}},[e._v("关 闭")])],1)],1)],1)},Nt=[],Mt={components:{},model:{prop:"dialogVisible",event:"close"},props:{dialogVisible:{type:Boolean,required:!0},formId:{type:String,default:"-1"}},data:function(){return{form:{content:{}}}},computed:{visible:{get:function(){return this.dialogVisible},set:function(){this.$emit("close",!1)}},title:function(){return"查看户口本"}},created:function(){this.defaultForm=u.a.cloneDeep(this.form)},destroyed:function(){this.defaultForm=null},methods:{open:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:return t.next=4,e.setData();case 4:case"end":return t.stop()}}),t)})))()},init:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{e.form.id=e.formId}catch(n){console.error("bag.getUserList-error:",n),a=n&&n.data.message||"发生了一些未知的错误，请重试！",e.$message.error(a)}case 1:case"end":return t.stop()}}),t)})))()},setData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h["f"].getBag({id:e.form.id});case 3:a=t.sent,n=a.data.data,e.form=n,t.next=13;break;case 8:t.prev=8,t.t0=t["catch"](0),console.error("bag.getBag-error:",t.t0),r=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(r);case 13:case"end":return t.stop()}}),t,null,[[0,8]])})))()},close:function(){this.$emit("save-success"),this.visible=!1},closed:function(){this.form=u.a.cloneDeep(this.defaultForm)}}},Wt=Mt,Gt=(a("867e"),Object(y["a"])(Wt,qt,Nt,!1,null,"626e2e20",null)),Ht=Gt.exports,Jt={name:"Bag",components:{TableLayout:f["a"],Pagination:m["a"],WarningConfirmButton:d["a"],householdRegisterFormDialog:Ft,householdRegisterFormDialogView:Ht},data:function(){return{tableData:[],tableLoading:!1,tablePagination:{total:0,pageSize:10,currentPage:1},tableSearchParams:{type:"householdRegister",name:""},tablePaginationDefault:null,tableSearchParamsDefault:null,tableMultipleSelection:[],dialogVisible:!1,dialogVisibleView:!1,formId:"-1"}},watch:{tableData:{handler:function(e,t){this.$refs.table.doLayout()},immediate:!0}},created:function(){this.loadTableData(),this.tablePaginationDefault=u.a.cloneDeep(this.tablePagination),this.tableSearchParamsDefault=u.a.cloneDeep(this.tableSearchParams)},destroyed:function(){this.tablePaginationDefault=null,this.tableSearchParamsDefault=null},methods:{loadTableData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,r,o,i,s,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.tableLoading=!0,a=e.tablePagination.currentPage,n=e.tablePagination.pageSize,r=e.tableSearchParams.type,o=e.tableSearchParams.name,t.prev=5,t.next=8,h["f"].getBagListByPage({page:a,limit:n,type:r,name:o});case 8:i=t.sent,s=i.data.data,e.tableData=s.list,e.tablePagination.total=s.pagination.total,e.tableLoading=!1,t.next=21;break;case 15:t.prev=15,t.t0=t["catch"](5),console.error("bag.getBagListByPage-error:",t.t0),e.tableLoading=!1,l=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(l);case 21:case"end":return t.stop()}}),t,null,[[5,15]])})))()},handleSelectionChange:function(e){this.tableMultipleSelection=e},handleRefresh:function(){this.tablePagination=u.a.cloneDeep(this.tablePaginationDefault),this.tableSearchParams=u.a.cloneDeep(this.tableSearchParamsDefault),this.loadTableData()},handleAdd:function(){this.formId="-1",this.dialogVisible=!0},handleEdit:function(e){this.formId=e.id,this.dialogVisible=!0},handleDelete:function(e,t){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){var r,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.done,o=t.close,n.prev=1,n.next=4,h["f"].deleteBag({ids:[e.id]});case 4:o(),n.next=13;break;case 7:n.prev=7,n.t0=n["catch"](1),console.error("bag.deleteBag-error:",n.t0),r(),i=n.t0&&n.t0.data.message||"发生了一些未知的错误，请重试！",a.$message.error(i);case 13:case"end":return n.stop()}}),n,null,[[1,7]])})))()},handleBulkDelete:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var n,r,o,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.done,r=e.close,a.prev=1,o=u.a.map(t.tableMultipleSelection,"id"),a.next=5,h["f"].deleteBag({ids:o});case 5:r(),a.next=14;break;case 8:a.prev=8,a.t0=a["catch"](1),console.error("bag.deleteBag-error:",a.t0),n(),i=a.t0&&a.t0.data.message||"发生了一些未知的错误，请重试！",t.$message.error(i);case 14:case"end":return a.stop()}}),a,null,[[1,8]])})))()},handleView:function(e){this.formId=e.id,this.dialogVisibleView=!0}}},Qt=Jt,Kt=(a("324f"),Object(y["a"])(Qt,zt,Ot,!1,null,"db64daf4",null)),Xt=Kt.exports,Yt=a("2f62"),Zt={name:"Wallet",components:{identityCard:j,drivingLicense:X,vehicleLicense:ge,marriageRegistration:je,ownershipCertificate:Xe,birthCertificate:gt,businessLicense:jt,householdRegister:Xt},data:function(){return{user:{},activeTab:"identityCard"}},computed:Object(o["a"])({},Object(Yt["b"])([])),watch:{activeTab:function(e){this.currentValue=e,this.$refs[e].loadTableData()}},created:function(){},methods:{}},ea=Zt,ta=(a("f75a3"),Object(y["a"])(ea,n,r,!1,null,"7b6f9250",null));t["default"]=ta.exports},c9e3:function(e,t,a){"use strict";a("b8e3")},cd3d:function(e,t,a){"use strict";a("abe3")},ce8d:function(e,t,a){"use strict";a("0eca")},d173:function(e,t,a){},d597:function(e,t,a){"use strict";a("5161")},d9a5:function(e,t,a){},d9cb:function(e,t,a){},dc18:function(e,t,a){},e317:function(e,t,a){},f1ab:function(e,t,a){},f5d0:function(e,t,a){"use strict";a("ab89")},f75a3:function(e,t,a){"use strict";a("b5fb")},f86a:function(e,t,a){"use strict";a("5c15")},fb3c:function(e,t,a){},fbbc:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{style:{border:"none",margin:"20px"}},[a("el-container",{class:{"fixed-height":!e.wrap}},[e.$slots.asside?a("el-aside",{attrs:{width:e.assideWidth}},[e._t("asside")],2):e._e(),a("el-container",[a("el-main",[a("div",{staticClass:"table-container"},[a("div",{staticClass:"table-layout-header"},[a("div",{staticClass:"left"},[e._t("headerLeft")],2),a("div",{staticClass:"right"},[e._t("headerRight")],2)]),a("div",{staticClass:"table-layout-content",class:{"fixed-table-height":!e.wrap}},[e._t("default")],2),e.$slots.pagination?a("div",{staticClass:"table-layout-pagination"},[e._t("pagination")],2):e._e()])])],1)],1)],1)},r=[],o={name:"TableLayout",props:{assideWidth:{type:String,default:"200px"},wrap:{type:Boolean,default:!0}}},i=o,s=(a("ce8d"),a("2877")),l=Object(s["a"])(i,n,r,!1,null,"549c5738",null);t["a"]=l.exports},fc90:function(e,t,a){"use strict";a("4ace")},fd90:function(e,t,a){"use strict";a("934a")},fe2b:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-button",{attrs:{size:e.size,type:e.buttonType,disabled:e.disabled},on:{click:function(t){return t.stopPropagation(),e._handleClick.apply(null,arguments)}}},[e._t("default")],2)},r=[],o={name:"WarningConfirmButton",props:{content:{type:String,default:"此操作无法恢复，是否继续？"},title:{type:String,default:"警告"},confirmButtonText:{type:String,default:"确定"},cancelButtonText:{type:String,default:"取消"},iconType:{type:String,default:"warning",validator:function(e){return-1!==["success","info","warning","error"].indexOf(e)}},size:{type:String,default:"mini"},buttonType:{type:String,default:"text"},disabled:{type:Boolean,default:!1},closed:{type:Function,default:function(){return function(){}}},cancel:{type:Function,default:function(){return function(){}}}},data:function(){return{loading:!1}},methods:{_handleClick:function(){var e=this;this.$confirm(this.content,this.title,{confirmButtonText:this.confirmButtonText,cancelButtonText:this.cancelButtonText,type:this.iconType,beforeClose:function(t,a,n){"confirm"===t?(a.confirmButtonLoading=!0,e.$emit("confirm",{close:function(){a.confirmButtonLoading=!1,n()},done:function(){console.log(111),a.confirmButtonLoading=!1}})):(a.confirmButtonLoading=!1,n())}}).then((function(t){console.log(222),e.closed()})).catch((function(t){e.cancel()}))}}},i=o,s=a("2877"),l=Object(s["a"])(i,n,r,!1,null,null,null);t["a"]=l.exports}}]);