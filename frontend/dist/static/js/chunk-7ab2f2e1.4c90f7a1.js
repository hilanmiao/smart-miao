(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ab2f2e1"],{"0508":function(e,t,a){"use strict";a("a1a3")},"0b8a":function(e,t,a){"use strict";a("1c02")},"0eca":function(e,t,a){},"1c02":function(e,t,a){},"333d":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pagination-container",class:{hidden:e.hidden}},[a("el-pagination",e._b({attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},"el-pagination",e.$attrs,!1))],1)},i=[];a("a9e3");Math.easeInOutQuad=function(e,t,a,n){return e/=n/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var o=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function l(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function r(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(e,t,a){var n=r(),i=e-n,s=20,c=0;t="undefined"===typeof t?500:t;var u=function e(){c+=s;var r=Math.easeInOutQuad(c,n,i,t);l(r),c<t?o(e):a&&"function"===typeof a&&a()};u()}var c={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e}),this.autoScroll&&s(0,800)},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize}),this.autoScroll&&s(0,800)}}},u=c,d=(a("0508"),a("2877")),g=Object(d["a"])(u,n,i,!1,null,"46986d7b",null);t["a"]=g.exports},"5ab1":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sys-login-log-container"},[a("table-layout",{staticClass:"table-layout",scopedSlots:e._u([{key:"headerLeft",fn:function(){},proxy:!0},{key:"headerRight",fn:function(){return[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",size:"mini",type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.tableSearchParams.dateRange,callback:function(t){e.$set(e.tableSearchParams,"dateRange",t)},expression:"tableSearchParams.dateRange"}}),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",icon:"el-icon-search",type:"primary"},on:{click:e.loadTableData}},[e._v("搜索")]),a("span",{staticClass:"line"},[e._v("|")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-refresh"},on:{click:e.handleRefresh}}),a("el-button",{attrs:{size:"mini",icon:"el-icon-download"}})]},proxy:!0},{key:"pagination",fn:function(){return[a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.tablePagination.total>0,expression:"tablePagination.total>0"}],attrs:{total:e.tablePagination.total,page:e.tablePagination.currentPage,limit:e.tablePagination.pageSize},on:{"update:page":function(t){return e.$set(e.tablePagination,"currentPage",t)},"update:limit":function(t){return e.$set(e.tablePagination,"pageSize",t)},pagination:e.loadTableData}})]},proxy:!0}])},[[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticClass:"has-checkbox",staticStyle:{width:"100%"},attrs:{data:e.tableData,size:"small","header-cell-style":{backgroundColor:"#ebeef4"},border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",width:"30"}}),a("el-table-column",{attrs:{prop:"username",label:"登录名",align:"center",width:"200"}}),a("el-table-column",{attrs:{prop:"ip",label:"登录IP",align:"center"}}),a("el-table-column",{attrs:{prop:"createdAt",label:"登录时间",align:"center"}}),a("el-table-column",{attrs:{prop:"os",label:"操作系统",align:"center"}}),a("el-table-column",{attrs:{prop:"browser",label:"浏览器",align:"center"}})],1)]],2)],1)},i=[],o=a("b85c"),l=a("1da1"),r=(a("96cf"),a("99af"),a("b0c0"),a("fbbc")),s=a("333d"),c=a("2b80"),u=a("dde5"),d=a("2ef0"),g=a.n(d),p={name:"SystemLoginLog",components:{TableLayout:r["a"],Pagination:s["a"]},data:function(){return{tableData:[],tableLoading:!1,tablePagination:{total:0,pageSize:10,currentPage:1},tableSearchParams:{dateRange:""},tablePaginationDefault:null,tableSearchParamsDefault:null,pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]}}},created:function(){this.loadTableData(),this.tablePaginationDefault=g.a.cloneDeep(this.tablePagination),this.tableSearchParamsDefault=g.a.cloneDeep(this.tableSearchParams)},destroyed:function(){this.tablePaginationDefault=null,this.tableSearchParamsDefault=null},methods:{loadTableData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,i,l,r,s,d,g,p,b,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.tableLoading=!0,a=e.tablePagination.currentPage,n=e.tablePagination.pageSize,i=e.tableSearchParams.dateRange,t.prev=4,t.next=7,u["j"].getLoginLogListByPage({page:a,limit:n,dateRange:i});case 7:l=t.sent,r=l.data.data,s=new c["UAParser"],d=Object(o["a"])(r.list);try{for(d.s();!(g=d.n()).done;)p=g.value,b=s.setUA(p.ua).getResult(),p.os="".concat(b.os.name," ").concat(b.os.version),p.browser="".concat(b.browser.name," ").concat(b.browser.version)}catch(h){d.e(h)}finally{d.f()}e.tableData=r.list,e.tablePagination.total=r.pagination.total,e.tableLoading=!1,t.next=23;break;case 17:t.prev=17,t.t0=t["catch"](4),console.error("loginLog.getLoginLogListByPage-error:",t.t0),e.tableLoading=!1,f=t.t0&&t.t0.data.message||"发生了一些未知的错误，请重试！",e.$message.error(f);case 23:case"end":return t.stop()}}),t,null,[[4,17]])})))()},handleRefresh:function(){this.tablePagination=g.a.cloneDeep(this.tablePaginationDefault),this.tableSearchParams=g.a.cloneDeep(this.tableSearchParamsDefault),this.loadTableData()}}},b=p,f=(a("0b8a"),a("2877")),h=Object(f["a"])(b,n,i,!1,null,"0cada656",null);t["default"]=h.exports},a1a3:function(e,t,a){},ce8d:function(e,t,a){"use strict";a("0eca")},fbbc:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{style:{border:"none",margin:"20px"}},[a("el-container",{class:{"fixed-height":!e.wrap}},[e.$slots.asside?a("el-aside",{attrs:{width:e.assideWidth}},[e._t("asside")],2):e._e(),a("el-container",[a("el-main",[a("div",{staticClass:"table-container"},[a("div",{staticClass:"table-layout-header"},[a("div",{staticClass:"left"},[e._t("headerLeft")],2),a("div",{staticClass:"right"},[e._t("headerRight")],2)]),a("div",{staticClass:"table-layout-content",class:{"fixed-table-height":!e.wrap}},[e._t("default")],2),e.$slots.pagination?a("div",{staticClass:"table-layout-pagination"},[e._t("pagination")],2):e._e()])])],1)],1)],1)},i=[],o={name:"TableLayout",props:{assideWidth:{type:String,default:"200px"},wrap:{type:Boolean,default:!0}}},l=o,r=(a("ce8d"),a("2877")),s=Object(r["a"])(l,n,i,!1,null,"549c5738",null);t["a"]=s.exports}}]);